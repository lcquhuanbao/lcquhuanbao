(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-548fbca6"],{"4feb":function(e,t,a){"use strict";var s=a("1988"),i=a("2638"),r=a.n(i),n=a("d282"),o=a("ba31"),l=a("7744"),c=a("1a23"),d=a("2797"),u=Object(n["a"])("switch-cell"),h=u[0],f=u[1];function p(e,t,a,i){return e(l["a"],r()([{attrs:{center:!0,size:t.cellSize,title:t.title,border:t.border},class:f([t.cellSize])},Object(o["b"])(i)]),[e(c["a"],{props:Object(s["a"])({},t),on:Object(s["a"])({},i.listeners)})])}p.props=Object(s["a"])({},d["a"],{title:String,cellSize:String,border:{type:Boolean,default:!0},size:{type:String,default:"24px"}}),t["a"]=h(p)},"54f3":function(e,t,a){},"6c1e":function(e,t,a){"use strict";var s=a("54f3"),i=a.n(s);i.a},afaa:function(e,t,a){},b7e7:function(e,t,a){},bda77:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addres_con"},[a("van-nav-bar",{staticClass:"navbar",attrs:{title:e.item.id?"修改地址":"添加地址","left-text":"","left-arrow":""},on:{"click-left":function(t){return e.back(!1)}}}),a("van-cell-group",{staticClass:"address_set cell"},[a("van-field",{attrs:{clearable:"",label:"姓名","input-align":"right",placeholder:"请输入姓名"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),a("van-field",{attrs:{type:"tel",label:"电话","input-align":"right",placeholder:"请输入联系电话"},model:{value:e.params.tel,callback:function(t){e.$set(e.params,"tel",t)},expression:"params.tel"}}),a("van-cell",{staticStyle:{"font-size":"12px"},attrs:{title:"地区",value:e.cateTitle,id:"trigger"}},[a("van-icon",{attrs:{slot:"right-icon",name:"arrow",size:"14px"},slot:"right-icon"})],1),a("van-field",{attrs:{clearable:"",label:"详细地址","input-align":"right",placeholder:"街道门牌，楼层房间号等信息"},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}})],1),a("div",{staticClass:"sk-butt"},[a("van-button",{attrs:{type:"primary",size:"large"},on:{click:e.onSave}},[e._v(e._s(void 0!=e.params.id?"修改":"保存"))])],1)],1)},i=[],r=a("9523"),n=a.n(r),o=(a("be7f"),a("565f")),l=(a("68ef"),a("a526"),a("09fe"),a("1146"),a("4d75"),a("b258"),a("2fcb"),a("d9d2"),a("afaa"),a("b7e7"),a("1988")),c=a("d282"),d=a("a142");function u(e){return e=e.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(e)||/^0[0-9-]{10,13}$/.test(e)}var h,f=a("1125"),p=a("e41f"),m=a("d399"),b=a("b650"),v=a("2241"),g=a("32d7"),w=a("7744"),y=Object(c["a"])("address-edit-detail"),$=y[0],k=y[1],D=y[2],S=Object(g["a"])(),C=$({props:{value:String,error:Boolean,focused:Boolean,detailRows:Number,searchResult:Array,detailMaxlength:Number,showSearchResult:Boolean},methods:{onSelect:function(e){this.$emit("select-search",e),this.$emit("input",((e.address||"")+" "+(e.name||"")).trim())},onFinish:function(){this.$refs.field.blur()},renderFinish:function(){var e=this.$createElement,t=this.value&&this.focused&&S;if(t)return e("div",{class:k("finish"),on:{click:this.onFinish}},[D("complete")])},renderSearchResult:function(){var e=this,t=this.$createElement,a=this.searchResult,s=this.focused&&a&&this.showSearchResult;if(s)return a.map(function(a){return t(w["a"],{key:a.name+a.address,attrs:{title:a.name,label:a.address,icon:"location-o",clickable:!0},on:{click:function(){e.onSelect(a)}}})})}},render:function(e){return e(w["a"],{class:k()},[e(o["a"],{attrs:{autosize:!0,rows:this.detailRows,clearable:!S,type:"textarea",value:this.value,error:this.error,label:D("label"),maxlength:this.detailMaxlength,placeholder:D("placeholder")},ref:"field",scopedSlots:{icon:this.renderFinish},on:Object(l["a"])({},this.$listeners)}),this.renderSearchResult()])}}),A=a("4feb"),x=Object(c["a"])("address-edit"),O=x[0],j=x[1],T=x[2],R={name:"",tel:"",country:"",province:"",city:"",county:"",areaCode:"",postalCode:"",addressDetail:"",isDefault:!1},B=O({props:{areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showDelete:Boolean,showPostal:Boolean,searchResult:Array,showSetDefault:Boolean,showSearchResult:Boolean,saveButtonText:String,deleteButtonText:String,showArea:{type:Boolean,default:!0},showDetail:{type:Boolean,default:!0},detailRows:{type:Number,default:1},detailMaxlength:{type:Number,default:200},addressInfo:{type:Object,default:function(){return Object(l["a"])({},R)}},telValidator:{type:Function,default:u}},data:function(){return{data:{},showAreaPopup:!1,detailFocused:!1,errorInfo:{tel:!1,name:!1,postalCode:!1,addressDetail:!1}}},computed:{areaListLoaded:function(){return Object(d["c"])(this.areaList)&&Object.keys(this.areaList).length},areaText:function(){var e=this.data,t=e.country,a=e.province,s=e.city,i=e.county,r=e.areaCode;if(r){var n=[t,a,s,i];return a&&a===s&&n.splice(1,1),n.filter(function(e){return e}).join("/")}return""}},watch:{addressInfo:{handler:function(e){this.data=Object(l["a"])({},R,{},e),this.setAreaCode(e.areaCode)},deep:!0,immediate:!0},areaList:function(){this.setAreaCode(this.data.areaCode)}},methods:{onFocus:function(e){this.errorInfo[e]=!1,this.detailFocused="addressDetail"===e,this.$emit("focus",e)},onChangeDetail:function(e){this.data.addressDetail=e,this.$emit("change-detail",e)},onAreaConfirm:function(e){this.showAreaPopup=!1,this.assignAreaValues(),this.$emit("change-area",e)},assignAreaValues:function(){var e=this.$refs.area;if(e){var t=e.getArea();t.areaCode=t.code,delete t.code,Object(l["a"])(this.data,t)}},onSave:function(){var e=this,t=["name","tel","areaCode","addressDetail"];this.showPostal&&t.push("postalCode");var a=t.every(function(t){var a=e.getErrorMessage(t);return a&&(e.errorInfo[t]=!0,Object(m["a"])(a)),!a});a&&!this.isSaving&&this.$emit("save",this.data)},getErrorMessage:function(e){var t=String(this.data[e]||"").trim();if(this.validator){var a=this.validator(e,t);if(a)return a}switch(e){case"name":return t?"":T("nameEmpty");case"tel":return this.telValidator(t)?"":T("telInvalid");case"areaCode":return t?"":T("areaEmpty");case"addressDetail":return t?"":T("addressEmpty");case"postalCode":return t&&!/^\d{6}$/.test(t)?T("postalEmpty"):""}},onDelete:function(){var e=this;v["a"].confirm({title:T("confirmDelete")}).then(function(){e.$emit("delete",e.data)}).catch(function(){e.$emit("cancel-delete",e.data)})},getArea:function(){return this.$refs.area?this.$refs.area.getValues():[]},setAreaCode:function(e){this.data.areaCode=e||"",e&&this.$nextTick(this.assignAreaValues)},setAddressDetail:function(e){this.data.addressDetail=e},onDetailBlur:function(){var e=this;setTimeout(function(){e.detailFocused=!1})}},render:function(e){var t=this,a=this.data,s=this.errorInfo,i=this.searchResult,r=function(e){return function(){return t.onFocus(e)}},n=i&&i.length&&this.detailFocused;return e("div",{class:j()},[e(o["a"],{attrs:{clearable:!0,label:T("name"),placeholder:T("namePlaceholder"),error:s.name},on:{focus:r("name")},model:{value:a.name,callback:function(e){a.name=e}}}),e(o["a"],{attrs:{clearable:!0,type:"tel",label:T("tel"),placeholder:T("telPlaceholder"),error:s.tel},on:{focus:r("tel")},model:{value:a.tel,callback:function(e){a.tel=e}}}),e(o["a"],{directives:[{name:"show",value:this.showArea}],attrs:{readonly:!0,label:T("area"),placeholder:T("areaPlaceholder"),value:this.areaText},on:{click:function(){t.showAreaPopup=!0}}}),e(C,{directives:[{name:"show",value:this.showDetail}],attrs:{focused:this.detailFocused,value:a.addressDetail,error:s.addressDetail,detailRows:this.detailRows,detailMaxlength:this.detailMaxlength,searchResult:this.searchResult,showSearchResult:this.showSearchResult},on:{focus:r("addressDetail"),blur:this.onDetailBlur,input:this.onChangeDetail,"select-search":function(e){t.$emit("select-search",e)}}}),this.showPostal&&e(o["a"],{directives:[{name:"show",value:!n}],attrs:{type:"tel",maxlength:"6",label:T("postal"),placeholder:T("postal"),error:s.postalCode},on:{focus:r("postalCode")},model:{value:a.postalCode,callback:function(e){a.postalCode=e}}}),this.slots(),this.showSetDefault&&e(A["a"],{directives:[{name:"show",value:!n}],attrs:{title:T("defaultAddress")},on:{change:function(e){t.$emit("change-default",e)}},model:{value:a.isDefault,callback:function(e){a.isDefault=e}}}),e("div",{directives:[{name:"show",value:!n}],class:j("buttons")},[e(b["a"],{attrs:{block:!0,loading:this.isSaving,type:"danger",text:this.saveButtonText||T("save")},on:{click:this.onSave}}),this.showDelete&&e(b["a"],{attrs:{block:!0,loading:this.isDeleting,text:this.deleteButtonText||T("delete")},on:{click:this.onDelete}})]),e(p["a"],{attrs:{position:"bottom",lazyRender:!1,getContainer:"body"},model:{value:t.showAreaPopup,callback:function(e){t.showAreaPopup=e}}},[e(f["a"],{ref:"area",attrs:{loading:!this.areaListLoaded,value:a.areaCode,areaList:this.areaList},on:{confirm:this.onAreaConfirm,cancel:function(){t.showAreaPopup=!1}}})])])}}),F=a("5118"),P=a("e11d"),z=a("d319"),L=a.n(z),E=a("33eb").default,I={components:(h={},n()(h,B.name,B),n()(h,o["a"].name,o["a"]),h),data:function(){return{areaList:E,searchResult:[],cateTitle:"请选择所在地区",params:{name:"",tel:"",address:"",province:"",city:"",area:"",town:""},citys:[]}},props:{item:{type:Object,default:function(){}},isOrder:{type:Boolean,default:!1}},created:function(){this.params=this.item,this.item.id&&(this.cateTitle=this.item.province,this.cateTitle+="-"+this.item.city,this.cateTitle+="-"+this.item.area,this.item.town&&(this.cateTitle+="-"+this.item.town),this.cateTitle=this.$fnc.deleteNumber(this.cateTitle))},mounted:function(){var e=this;new L.a({trigger:"#trigger",title:"",triggerDisplayData:!1,wheels:[{data:P}],keyMap:{id:"y",value:"t",childs:"z"},position:[],callback:function(t,a){e.params.town="",e.cateTitle=a[0].t+"-"+a[1].t+"-"+a[2].t,e.params.province=a[0].t,e.params.city=a[1].t,e.params.area=a[2].t,a[3]&&(e.params.town=a[3].t,e.cateTitle+="-"+a[3].t),e.cateTitle=e.$fnc.deleteNumber(e.cateTitle)},transitionEnd:function(e,t){}})},methods:{back:function(e){this.$emit("back",e)},onSave:function(){var e=this,t=this.params;this.params.id?this.$api.getSetting.setDefaultAddress(t).then(function(t){200==t.code&&(e.$toast.success("修改成功"),e.isOrder?(e.$emit("getAddressItem",t.result),e.back(!0)):Object(F["setTimeout"])(function(){e.back(!0)},2e3))}):this.$api.getSetting.addAress(t).then(function(t){200==t.code&&(e.$toast.success("添加成功"),e.isOrder?(e.$emit("getAddressItem",t.result),e.back(!0)):Object(F["setTimeout"])(function(){e.back(!0)},2e3))})},onDelete:function(e){var t=this,a={};a.id=e.id,this.$api.getSetting.delAddres(a).then(function(e){200==e.code&&(t.$toast.success("删除成功"),Object(F["setTimeout"])(function(){t.back(!0)},2e3))})}}},M=I,N=(a("6c1e"),a("2877")),V=Object(N["a"])(M,s,i,!1,null,"7053d0c9",null);t["default"]=V.exports}}]);