(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45263daf"],{"0b1a":function(t,a,e){},4662:function(t,a,e){"use strict";e("68ef"),e("4d75"),e("8270"),e("786d"),e("504b")},e766:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"con_bg"},[e("van-nav-bar",{staticClass:"navbar",attrs:{title:"关联微信","left-text":"","left-arrow":""},on:{"click-left":t.toBack}}),e("form",[e("div",{staticClass:"cu-form-group"},[e("div",{staticClass:"title hongx sx"},[t._v("微信账号")]),e("van-cell-group",{attrs:{border:!1}},[e("van-field",{attrs:{type:"text",placeholder:"请填写正确的微信账号(将加密保存)",clearable:""},on:{blur:t.windowScorll},model:{value:t.userInfoData.wechat,callback:function(a){t.$set(t.userInfoData,"wechat",a)},expression:"userInfoData.wechat"}})],1)],1),t._m(0),t._m(1),e("div",{staticClass:"bg-gradual-write up_img_con"},[e("div",{staticClass:"box_alea"},[e("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.wximgList,expression:"wximgList!=''"}],staticClass:"up_bor",style:"background-image:url("+t.$fnc.getImgUrl(t.wximgList)+")",on:{click:function(a){return t.imagePreview(t.wximgList)}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.wximgList,expression:"wximgList!=''"}],staticClass:"cu-tag close_img bg-red"},[e("van-icon",{attrs:{name:"cross",color:"#fff",size:"14"},on:{click:function(a){return t.closeImg("微信")}}})],1),e("van-uploader",{attrs:{"after-read":t.onRead}},[e("div",{directives:[{name:"show",rawName:"v-show",value:""==t.wximgList,expression:"wximgList==''"}],staticClass:"up_bor wx_bg"},[e("div",{staticClass:"wx_up_img"}),e("div",{staticClass:"up_text"},[t._v("上传微信收款码")])])])],1)]),0==t.userInfo.is_real?e("div",{staticClass:"padding"},[e("div",{staticClass:"cu-btn but bg-gradual-orange block margin-tb-sm lg",on:{click:t.subInfo}},[t._v("确定")])]):t._e()])],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cu-form-group mar_top"},[e("div",{staticClass:"title hongx"},[t._v("\n        上传微信收款码截图\n        "),e("span",{staticStyle:{color:"#999"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cu-form-group",staticStyle:{border:"none"}},[e("div",{staticClass:"title beiz"},[e("div",{staticStyle:{color:"#999"}},[t._v("温馨提示：请上传微信收款二维码的截图，请勿裁剪涂改，保证图片信息清晰显示，否则无法审核通过")])])])}],n=(e("4662"),e("28a2")),o=e("9523"),r=e.n(o),c=(e("be7f"),e("565f")),l=e("bc3a"),u=e.n(l),d={name:"alpaywx",data:function(){return{avatar:"",wximgList:"",alipyImgList:"",userInfoData:{alipay_name:"",alipay:"",wechat:""},loadModal:!1,iswx:!0,src:"",userInfo:this.$store.state.user}},components:r()({},c["a"].name,c["a"]),computed:{},methods:{imagePreview:function(t){Object(n["a"])([this.$fnc.getImgUrl(t)])},closeImg:function(t){var a=this;this.$dialog.confirm({title:"提示",message:"确定删除"+t+"图片吗"}).then(function(){"微信"==t?a.wximgList="":a.alipyImgList=""})},onRead:function(t){this.iswx=!0,this.cpimgOk(t.content)},onReadA:function(t){this.iswx=!1,this.cpimgOk(t.content)},cpimgOk:function(t){this.$toast.loading({mask:!1,message:"上传中...",duration:0});var a=this,e=new Image;e.src=t,e.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d"),s=e.width,n=e.height,o=750,r=750,c=s,l=n;(s>o||n>r)&&(s/n>o/r?(c=o,l=Math.round(o*(n/s))):(l=r,c=Math.round(r*(s/n)))),t.width=c,t.height=l,i.clearRect(0,0,c,l),i.drawImage(e,0,0,c,l);var d=t.toDataURL("image/jpeg",.92),f=a.convertBase64UrlToBlob(d),g=new FormData;g.append("file",f,"file_"+Date.parse(new Date)+".jpg");var m={headers:{"Content-Type":"multipart/form-data"}};u.a.post("/api/common/upload/index/",g,m).then(function(t){200==t.data.code?(a.avatar=t.data.result,a.iswx?a.wximgList=t.data.result:a.alipyImgList=t.data.result,a.$toast.clear()):a.$toast.fail("图片上传失败")})}},convertBase64UrlToBlob:function(t){for(var a=window.atob(t.split(",")[1]),e=new ArrayBuffer(a.length),i=new Uint8Array(e),s=0;s<a.length;s++)i[s]=a.charCodeAt(s);return new Blob([e],{type:"image/png"})},subInfo:function(){var t=this;if(""==this.userInfoData.wechat||this.userInfoData.wechat.length>25)return this.$toast.fail("微信账号不能为空，且最多不超过25个字符"),!1;var a={wechat:this.userInfoData.wechat,wechat_pic:this.wximgList||""};this.$api.getSetting.setWxSetting(a).then(function(a){200==a.code&&(t.$toast.success("操作成功"),setTimeout(function(){t.$store.dispatch("getUser"),t.toBack()},1500))})}},created:function(){var t=this.$store.state.user;this.userInfoData={wechat:t.wechat},this.wximgList=t.wechat_pic||""}},f=d,g=(e("fd90"),e("2877")),m=Object(g["a"])(f,i,s,!1,null,"14f1ce9a",null);a["default"]=m.exports},fd90:function(t,a,e){"use strict";var i=e("0b1a"),s=e.n(i);s.a}}]);