(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-735337ff"],{"0500":function(t,e,a){"use strict";a("68ef"),a("09fe"),a("d9d2"),a("afaa")},"0bae":function(t,e,a){"use strict";var s=a("d1f3"),i=a.n(s);i.a},1288:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"demo"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.panel,expression:"panel"}],staticClass:"container"},[a("div",[a("img",{attrs:{id:"image",src:t.url,alt:"Picture"}})]),a("button",{attrs:{type:"button",id:"button"},on:{click:t.crop}},[t._v("确定")])])])},i=[],n=a("bab4"),o=a.n(n),c={components:{},props:{imgSrc:{type:String,default:""}},data:function(){return{headerImage:"",picValue:"",cropper:"",croppable:!1,panel:!1,url:""}},watch:{imgSrc:function(t){t&&this.change()}},mounted:function(){var t=this,e=document.getElementById("image");this.cropper=new o.a(e,{aspectRatio:1,viewMode:1,background:!0,resizable:!1,dragCrop:!1,zoomable:!0,rotatable:!0,ready:function(){t.croppable=!0}})},methods:{getObjectURL:function(t){var e=null;return void 0!=window.createObjectURL?e=window.createObjectURL(t):void 0!=window.URL?e=window.URL.createObjectURL(t):void 0!=window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},change:function(){this.url=this.imgSrc,this.cropper&&this.cropper.replace(this.url),this.panel=!0},crop:function(){var t,e;this.panel=!1,this.croppable&&(t=this.cropper.getCroppedCanvas(),e=this.getRoundedCanvas(t),this.headerImage=e.toDataURL(),this.$emit("sendImg",this.headerImage))},getRoundedCanvas:function(t){var e=document.createElement("canvas"),a=e.getContext("2d"),s=t.width,i=t.height,n=750,o=750,c=s,r=i;return(s>n||i>o)&&(s/i>n/o?(c=n,r=Math.round(n*(i/s))):(r=o,c=Math.round(o*(s/i)))),e.width=c,e.height=r,a.clearRect(0,0,c,r),a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.drawImage(t,0,0,c,r),e}}},r=c,l=(a("32cc"),a("2877")),p=Object(l["a"])(r,s,i,!1,null,null,null);e["a"]=p.exports},2381:function(t,e,a){},"32cc":function(t,e,a){"use strict";var s=a("848a"),i=a.n(s);i.a},"3acc":function(t,e,a){"use strict";var s=a("d282"),i=a("9884"),n=Object(s["a"])("checkbox-group"),o=n[0],c=n[1];e["a"]=o({mixins:[Object(i["b"])("vanCheckbox")],props:{max:Number,disabled:Boolean,value:{type:Array,default:function(){return[]}}},watch:{value:function(t){this.$emit("change",t)}},render:function(t){return t("div",{class:c()},[this.slots()])}})},"3c32":function(t,e,a){"use strict";a("68ef"),a("09fe"),a("2381")},"417e":function(t,e,a){"use strict";var s=a("d282"),i=a("0a26"),n=Object(s["a"])("checkbox"),o=n[0],c=n[1];e["a"]=o({mixins:[Object(i["a"])({bem:c,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}}},watch:{value:function(t){this.$emit("change",t)}},methods:{toggle:function(){var t=this,e=!this.checked;clearTimeout(this.toggleTask),this.toggleTask=setTimeout(function(){t.checked=e})},onClickIcon:function(){this.isDisabled||this.toggle()},onClickLabel:function(){this.isDisabled||this.labelDisabled||this.toggle()},setParentValue:function(t){var e=this.parent,a=e.value.slice();if(t){if(e.max&&a.length>=e.max)return;-1===a.indexOf(this.name)&&(a.push(this.name),e.$emit("input",a))}else{var s=a.indexOf(this.name);-1!==s&&(a.splice(s,1),e.$emit("input",a))}}}})},"4feb":function(t,e,a){"use strict";var s=a("1988"),i=a("2638"),n=a.n(i),o=a("d282"),c=a("ba31"),r=a("7744"),l=a("1a23"),p=a("2797"),u=Object(o["a"])("switch-cell"),h=u[0],d=u[1];function f(t,e,a,i){return t(r["a"],n()([{attrs:{center:!0,size:e.cellSize,title:e.title,border:e.border},class:d([e.cellSize])},Object(c["b"])(i)]),[t(l["a"],{props:Object(s["a"])({},e),on:Object(s["a"])({},i.listeners)})])}f.props=Object(s["a"])({},p["a"],{title:String,cellSize:String,border:{type:Boolean,default:!0},size:{type:String,default:"24px"}}),e["a"]=h(f)},"848a":function(t,e,a){},a909:function(t,e,a){"use strict";a("68ef")},afaa:function(t,e,a){},d1f3:function(t,e,a){},ead3:function(t,e,a){"use strict";a.r(e);var s,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"a-z-shop"},[a("van-nav-bar",{staticClass:"navbar",attrs:{title:"商户信息","left-text":"","left-arrow":""},on:{"click-left":t.toBack}}),a("van-cell-group",{attrs:{title:"商户logo"}},[a("div",{staticClass:"a-z-imgs"},[a("div",{staticClass:"box_img"},[""!=t.params.shop_logo?a("div",{staticClass:"box_img_img"},[a("img",{attrs:{width:"80",height:"80",src:t.$fnc.getImgUrl(t.params.shop_logo)}}),a("span",{on:{click:function(e){t.params.shop_logo=""}}},[a("van-icon",{attrs:{name:"cross",size:"18",color:"#fff"}})],1)]):t._e(),""==t.params.shop_logo?a("van-uploader",{staticClass:"up_img_add",attrs:{multiple:"","after-read":t.afterRead}},[a("div",{staticClass:"up_inp_refund"},[a("van-icon",{staticClass:"fa fa-camera",attrs:{name:"close",size:"37px",color:"#c2c2c2"}}),a("p",[t._v("添加商户logo")])],1)]):t._e()],1)])]),a("van-cell-group",{attrs:{title:"商户二维码"}},[a("div",{staticClass:"a-z-imgs"},[a("div",{staticClass:"box_img"},[""!=t.params.shop_wechat?a("div",{staticClass:"box_img_img"},[a("img",{attrs:{width:"80",height:"80",src:t.$fnc.getImgUrl(t.params.shop_wechat)}}),a("span",{on:{click:function(e){t.params.shop_wechat=""}}},[a("van-icon",{attrs:{name:"cross",size:"18",color:"#fff"}})],1)]):t._e(),""==t.params.shop_wechat?a("van-uploader",{staticClass:"up_img_add",attrs:{multiple:"","after-read":t.afterRead1}},[a("div",{staticClass:"up_inp_refund"},[a("van-icon",{staticClass:"fa fa-camera",attrs:{name:"close",size:"37px",color:"#c2c2c2"}}),a("p",[t._v("添加商户二维码")])],1)]):t._e()],1)])]),a("van-cell-group",{staticClass:"ad_shop mar-top-8",attrs:{title:"商户基本信息"}},[a("van-cell",{staticClass:"cell fx",attrs:{title:"商家名称"}},[a("van-field",{staticClass:"input_cells",attrs:{size:"large",placeholder:"","input-align":"right"},model:{value:t.params.shop_title,callback:function(e){t.$set(t.params,"shop_title",e)},expression:"params.shop_title"}})],1),a("van-cell",{staticClass:"cell",attrs:{title:"商品分类",value:t.cateTitle||"请选择商品分类",id:"trigger"},on:{click:function(e){t.show=!0}}},[a("van-icon",{attrs:{slot:"right-icon",name:"arrow",size:"14px"},slot:"right-icon"})],1),a("van-cell",{staticClass:"cell",attrs:{title:"商家地址",value:t.cs,id:"trigger1"}},[a("van-icon",{attrs:{slot:"right-icon",name:"arrow",size:"14px"},slot:"right-icon"})],1),a("van-cell",{staticClass:"cell",attrs:{title:"区域街道"}},[a("van-field",{staticClass:"input_cells",attrs:{placeholder:"街道门牌等信息","input-align":"right"},model:{value:t.params.shop_address,callback:function(e){t.$set(t.params,"shop_address",e)},expression:"params.shop_address"}})],1),a("van-cell",{staticClass:"cell",attrs:{title:"商家电话"}},[a("van-field",{staticClass:"input_cells",attrs:{placeholder:"",type:"tel","input-align":"right"},model:{value:t.params.shop_tel,callback:function(e){t.$set(t.params,"shop_tel",e)},expression:"params.shop_tel"}})],1)],1),a("van-button",{staticClass:"pay_order_btn mar-top-8",attrs:{type:"primary",size:"large"},on:{click:t.subSupplier}},[t._v("提交")]),a("ImgCrop",{directives:[{name:"show",rawName:"v-show",value:t.showCrop,expression:"showCrop"}],attrs:{imgSrc:t.imgSrc},on:{sendImg:t.getImg}}),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"fx"},[a("van-button",{attrs:{type:"default"},on:{click:function(e){t.show=!1}}},[t._v("取消")]),a("van-button",{attrs:{type:"primary"},on:{click:function(e){t.show=!1}}},[t._v("确认")])],1),a("van-checkbox-group",{staticClass:"mar-top-8 cate-tree",model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},[a("van-cell-group",t._l(t.list,function(e,s){return a("van-cell",{key:e.id,attrs:{clickable:"",title:""+e.title},on:{click:function(e){return t.toggle(s)}}},[a("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{slot:"right-icon",name:e.id},slot:"right-icon"})],1)}),1)],1)],1)],1)},n=[],o=a("9523"),c=a.n(o),r=(a("a909"),a("3acc")),l=(a("3c32"),a("417e")),p=(a("0500"),a("4feb")),u=(a("be7f"),a("565f")),h=(a("bc3a"),a("1288")),d=a("5118"),f=a("d319"),m=a.n(f),g=a("e11d"),v={data:function(){return{show:!1,showCrop:!1,imgSrc:"",isLogo:!0,params:{shop_title:"",shop_tel:"",shop_province:"",shop_logo:"",shop_city:"",shop_cate:"",shop_area:"",shop_town:"",shop_address:"1",shop_wechat:""},list:["a","b","c"],result:[],cateTitle:"",cs:"请选择地址"}},components:(s={},c()(s,u["a"].name,u["a"]),c()(s,p["a"].name,p["a"]),c()(s,l["a"].name,l["a"]),c()(s,r["a"].name,r["a"]),c()(s,"ImgCrop",h["a"]),s),created:function(){this.getCate()},mounted:function(){var t=this;new m.a({trigger:"#trigger1",title:"",triggerDisplayData:!1,wheels:[{data:g}],keyMap:{id:"y",value:"t",childs:"z"},position:[],callback:function(e,a){t.params.town="",t.cs=a[0].t+"-"+a[1].t+"-"+a[2].t,t.params.shop_province=a[0].t,t.params.shop_city=a[1].t,t.params.shop_area=a[2].t,a[3]&&(t.params.shop_town=a[3].t,t.cs+="-"+a[3].t),t.cs=t.$fnc.deleteNumber(t.cs)},transitionEnd:function(t,e){}})},methods:{subSupplier:function(){var t=this;t.$dialog.confirm({message:"是否提交商户信息？"}).then(function(){var e={};e=t.params,t.$api.getSupplier.saveEditSupplierShopInfo(e).then(function(e){200==e.code&&(t.$toast.success("提交成功"),Object(d["setTimeout"])(function(){t.toBack()},1500))})}).catch(function(){})},getSupplierShopS:function(){var t=this;this.$api.getSupplier.getSupplierShopInfo({}).then(function(e){200==e.code&&(t.params=e.result,t.result=e.result.shop_cate.split("@"),t.cs=t.$fnc.deleteNumber(e.result.shop_province+e.result.shop_city+e.result.shop_town+e.result.shop_area))})},toggle:function(t){this.$refs.checkboxes[t].toggle()},getCate:function(){var t=this;this.$api.getShop.getShopCate({}).then(function(e){200==e.code&&(t.list=e.result.cate,t.getSupplierShopS())})},getImg:function(t){var e=this;this.$fnc.imgCompress(t,function(t){e.isLogo?e.params.shop_logo=t:e.params.shop_wechat=t})},afterRead:function(t){this.showCrop=!0,this.imgSrc=t.content,this.isisLogo=!0},afterRead1:function(t){this.showCrop=!0,this.imgSrc=t.content,this.isLogo=!1}},watch:{result:function(t){var e=this.$fnc.getCheck(t,this.list);for(var a in this.params.shop_cate=t.join("@"),this.cateTitle="",e)this.cateTitle+=" / "+e[a].title;this.cateTitle=this.cateTitle.slice(2)}}},b=v,_=(a("0bae"),a("2877")),w=Object(_["a"])(b,i,n,!1,null,"7c946461",null);e["default"]=w.exports}}]);