(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-441c6d8b"],{"06d6":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"con_bg"},[e("van-nav-bar",{staticClass:"navbar",attrs:{title:"实名认证","left-text":"","left-arrow":""},on:{"click-left":t.toBack}}),e("form",[e("div",{staticClass:"cu-form-group margin-top"},[e("div",{staticClass:"title xm hongx"},[t._v("真实姓名")]),e("van-cell-group",{attrs:{border:!1}},[e("van-field",{attrs:{disabled:""!=t.userInfo.name,type:"text",placeholder:"请使用真实姓名",clearable:""},model:{value:t.userInfoData.realName,callback:function(a){t.$set(t.userInfoData,"realName",a)},expression:"userInfoData.realName"}})],1)],1),e("div",{staticClass:"cu-form-group"},[e("div",{staticClass:"title xm hongx"},[t._v("身份证号")]),e("van-cell-group",{attrs:{border:!1}},[e("van-field",{attrs:{disabled:""!=t.userInfo.name,type:"text",placeholder:"请输入身份证号",clearable:""},model:{value:t.userInfoData.cardNo,callback:function(a){t.$set(t.userInfoData,"cardNo",a)},expression:"userInfoData.cardNo"}})],1)],1),t.userInfo.name?e("div",{staticClass:"padding"},[e("div",{staticClass:"cu-btn bg-gradual-orange block margin-tb-sm lg but",attrs:{disabled:"true"}},[t._v("已实名")])]):t._e(),t._m(0),t._m(1),e("div",{staticClass:"bg-gradual-write up_img_con"},[e("div",{staticClass:"up_div"},[e("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.wximgList,expression:"wximgList!=''"}],staticClass:"up_bor",style:"background-image:url("+t.$fnc.getImgUrl(t.wximgList)+")",on:{click:function(a){return t.imagePreview(t.wximgList)}}}),e("div",{staticClass:"cu-tag close_img bg-red"},[e("van-icon",{attrs:{name:"cross",color:"#fff",size:"14"},on:{click:function(a){return t.closeImg("正面")}}})],1),""==t.wximgList?e("van-uploader",{attrs:{"after-read":t.onRead}},[e("div",{staticClass:"up_bor"},[e("div",{staticClass:"up_img"})])]):t._e(),e("div",{staticClass:"up_text tc"},[t._v("上传身份证正面")])],1),e("div",{staticClass:"up_div"},[e("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.alipyImgList,expression:"alipyImgList!=''"}],staticClass:"up_bor",style:"background-image:url("+t.$fnc.getImgUrl(t.alipyImgList)+")",on:{click:function(a){return t.imagePreview(t.alipyImgList)}}}),e("div",{staticClass:"cu-tag close_img bg-red",on:{click:function(a){return t.closeImg("反面")}}},[e("van-icon",{attrs:{name:"cross",color:"#fff",size:"14"},on:{click:function(a){return t.closeImg("支付宝")}}})],1),""==t.alipyImgList?e("van-uploader",{attrs:{"after-read":t.onReadA}},[e("div",{staticClass:"up_bor"},[e("div",{staticClass:"up_img"})])]):t._e(),e("div",{staticClass:"up_text tc"},[t._v("上传身份证反面")])],1)]),e("div",{staticClass:"padding"},[e("div",{staticClass:"cu-btn bg-gradual-orange block but margin-tb-sm lg",on:{click:t.subInfo}},[t._v("确定")])])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cu-form-group mar_top"},[e("div",{staticClass:"title"},[t._v("\n        上传身份证证件（选填）\n        "),e("span",{staticStyle:{color:"#999"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cu-form-group"},[e("div",{staticClass:"title beiz"},[e("div",{staticStyle:{color:"#999"}},[t._v("温馨提示：请上传身份证正反面的截图，请勿裁剪涂改，保证图片信息清晰显示，否则无法审核通过")])])])}],r=(e("4662"),e("28a2")),n=e("9523"),o=e.n(n),c=(e("be7f"),e("565f")),l=e("bc3a"),u=e.n(l),d={name:"alpaywx",data:function(){return{avatar:"",wximgList:"",alipyImgList:"",userInfoData:{realName:"",cardNo:""},iswx:!0,src:"",userInfo:this.$store.state.user}},components:o()({},c["a"].name,c["a"]),computed:{},methods:{imagePreview:function(t){Object(r["a"])([this.$fnc.getImgUrl(t)])},closeImg:function(t){var a=this;this.$dialog.confirm({title:"提示",message:"确定删除"+t+"图片吗"}).then(function(){"正面"==t?a.wximgList="":a.alipyImgList=""})},onRead:function(t){this.iswx=!0,this.cpimgOk(t.content)},onReadA:function(t){this.iswx=!1,this.cpimgOk(t.content)},cpimgOk:function(t){this.$toast.loading({mask:!1,message:"上传中...",duration:0});var a=this,e=new Image;e.src=t,e.onload=function(){var t=document.createElement("canvas"),s=t.getContext("2d"),i=e.width,r=e.height,n=750,o=750,c=i,l=r;(i>n||r>o)&&(i/r>n/o?(c=n,l=Math.round(n*(r/i))):(l=o,c=Math.round(o*(i/r)))),t.width=c,t.height=l,s.clearRect(0,0,c,l),s.drawImage(e,0,0,c,l);var d=t.toDataURL("image/jpeg",.92),m=a.convertBase64UrlToBlob(d),g=new FormData;g.append("file",m,"file_"+Date.parse(new Date)+".jpg");var f={headers:{"Content-Type":"multipart/form-data"}};u.a.post("/api/common/upload/index/",g,f).then(function(t){200==t.data.code?(a.avatar=t.data.result,a.iswx?a.wximgList=t.data.result:a.alipyImgList=t.data.result,a.$toast.clear()):a.$toast.fail("图片上传失败")})}},convertBase64UrlToBlob:function(t){for(var a=window.atob(t.split(",")[1]),e=new ArrayBuffer(a.length),s=new Uint8Array(e),i=0;i<a.length;i++)s[i]=a.charCodeAt(i);return new Blob([e],{type:"image/png"})},subInfo:function(){var t=this;if(""==this.userInfoData.realName||this.userInfoData.realName.length>6)return this.$toast.fail("姓名不能为空，且最多不超过6个字符"),!1;if(""==this.userInfoData.cardNo||this.userInfoData.cardNo.length>20)return this.$toast.fail("身份证不能为空，且最多不超过20个字符"),!1;var a={cardNo:this.userInfoData.cardNo,realName:this.userInfoData.realName,card_face:this.wximgList||"",card_bg:this.alipyImgList||""};this.$api.getSetting.setRealname(a).then(function(a){200==a.code&&(t.$toast.success("操作成功"),setTimeout(function(){t.$store.dispatch("getUser"),t.toBack()},3e3))})}},created:function(){var t=this.$store.state.user;this.userInfoData={realName:t.name,cardNo:t.card},this.wximgList=t.card_face||"",this.alipyImgList=t.card_bg||""}},m=d,g=(e("2dcb"),e("2877")),f=Object(g["a"])(m,s,i,!1,null,"8ecd9104",null);a["default"]=f.exports},"2dcb":function(t,a,e){"use strict";var s=e("cd6e"),i=e.n(s);i.a},4662:function(t,a,e){"use strict";e("68ef"),e("4d75"),e("8270"),e("786d"),e("504b")},cd6e:function(t,a,e){}}]);