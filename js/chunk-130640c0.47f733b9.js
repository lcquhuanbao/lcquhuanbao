(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-130640c0"],{1469:function(t,e,n){},"236d":function(t,e,n){},2381:function(t,e,n){},"36cf":function(t,e,n){},"3bb9":function(t,e,n){"use strict";var i=n("5d69"),o=n.n(i);o.a},"417e":function(t,e,n){"use strict";var i=n("d282"),o=n("0a26"),s=Object(i["a"])("checkbox"),a=s[0],r=s[1];e["a"]=a({mixins:[Object(o["a"])({bem:r,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}}},watch:{value:function(t){this.$emit("change",t)}},methods:{toggle:function(){var t=this,e=!this.checked;clearTimeout(this.toggleTask),this.toggleTask=setTimeout(function(){t.checked=e})},onClickIcon:function(){this.isDisabled||this.toggle()},onClickLabel:function(){this.isDisabled||this.labelDisabled||this.toggle()},setParentValue:function(t){var e=this.parent,n=e.value.slice();if(t){if(e.max&&n.length>=e.max)return;-1===n.indexOf(this.name)&&(n.push(this.name),e.$emit("input",n))}else{var i=n.indexOf(this.name);-1!==i&&(n.splice(i,1),e.$emit("input",n))}}}})},"531c":function(t,e,n){},"54a3":function(t,e,n){},"5c5b":function(t,e,n){},"5d69":function(t,e,n){},"64a1":function(t,e,n){"use strict";var i=n("236d"),o=n.n(i);o.a},"6c11":function(t,e,n){},"7cfe":function(t,e,n){"use strict";var i=n("1469"),o=n.n(i);o.a},8238:function(t,e,n){},"8fce":function(t,e,n){"use strict";var i=n("6c11"),o=n.n(i);o.a},"935d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"con_pou"},[t.defaultCoupon?n("div",{staticClass:"coupon_conn"},t._l(t.coupon,function(e,i){return n("oneCoupon",{key:i,attrs:{item:e},on:{closePop:t.closePop}})}),1):n("div",{staticClass:"coupon_conn coupon_conn1"},[n("van-tabs",{attrs:{animated:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:"可使用优惠卷("+t.coupon1.length+")"}},[n("div",{staticClass:"coupon_conn"},t._l(t.coupon1,function(e,i){return n("oneCoupon",{key:i,attrs:{item:e,defaultCoupon:!1},on:{closePop:t.closePop,setHb:t.setHb}})}),1)]),n("van-tab",{attrs:{title:"不可使用优惠卷("+t.coupon2.length+")"}},[n("div",{staticClass:"coupon_conn"},t._l(t.coupon2,function(t,e){return n("oneCoupon",{key:e,attrs:{item:t,defaultCoupon:!1}})}),1)])],1)],1),n("div",{staticClass:"sub_coupon_div fx"},[n("van-button",{staticClass:"sub_coupon",attrs:{size:"large"},on:{click:t.closePop}},[t._v("关闭")])],1)])},o=[],s=n("9523"),a=n.n(s),r=(n("68ef"),n("f319"),n("b807"),n("ae9e"),n("09fe"),n("1146"),n("2381"),n("54a3"),n("8238"),n("d282")),c=n("0b33"),u=n("5e46"),d=n("565f"),l=n("b650"),p=n("6aa9"),h=n("68ed"),f=n("417e"),m=Object(r["a"])("coupon"),_=m[0],v=m[1],g=m[2];function b(t){var e=new Date(1e3*t);return e.getFullYear()+"."+Object(h["b"])(e.getMonth()+1)+"."+Object(h["b"])(e.getDate())}function y(t){return(t/10).toFixed(t%10===0?0:1)}function C(t){return(t/100).toFixed(t%100===0?0:t%10===0?1:2)}var x,w=_({props:{coupon:Object,chosen:Boolean,disabled:Boolean,currency:{type:String,default:"¥"}},computed:{validPeriod:function(){var t=this.coupon,e=t.startAt,n=t.endAt;return g("valid")+"："+b(e)+" - "+b(n)},faceAmount:function(){var t=this.coupon;return t.valueDesc?t.valueDesc+"<span>"+(t.unitDesc||"")+"</span>":t.denominations?"<span>"+this.currency+"</span> "+C(this.coupon.denominations):t.discount?g("discount",y(this.coupon.discount)):""},conditionMessage:function(){var t=C(this.coupon.originCondition);return"0"===t?g("unlimited"):g("condition",t)}},render:function(t){var e=this.coupon,n=this.disabled,i=n&&e.reason||e.description;return t("div",{class:v({disabled:n})},[t("div",{class:v("content")},[t("div",{class:v("head")},[t("h2",{class:v("amount"),domProps:{innerHTML:this.faceAmount}}),t("p",[this.coupon.condition||this.conditionMessage])]),t("div",{class:v("body")},[t("h2",{class:v("name")},[e.name]),t("p",[this.validPeriod]),this.chosen&&t(f["a"],{attrs:{value:!0,"checked-color":p["e"]},class:v("corner")})])]),i&&t("p",{class:v("description")},[i])])}}),k=Object(r["a"])("coupon-list"),I=k[0],O=k[1],$=k[2],T="https://img.yzcdn.cn/vant/coupon-empty.png",D=I({model:{prop:"code"},props:{code:String,closeButtonText:String,inputPlaceholder:String,enabledTitle:String,disabledTitle:String,exchangeButtonText:String,exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean,exchangeMinLength:{type:Number,default:1},chosenCoupon:{type:Number,default:-1},coupons:{type:Array,default:function(){return[]}},disabledCoupons:{type:Array,default:function(){return[]}},displayedCouponIndex:{type:Number,default:-1},showExchangeBar:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},currency:{type:String,default:"¥"}},data:function(){return{tab:0,winHeight:window.innerHeight,currentCode:this.code||""}},computed:{buttonDisabled:function(){return!this.exchangeButtonLoading&&(this.exchangeButtonDisabled||!this.currentCode||this.currentCode.length<this.exchangeMinLength)},listStyle:function(){return{height:this.winHeight-(this.showExchangeBar?140:94)+"px"}}},watch:{code:function(t){this.currentCode=t},currentCode:function(t){this.$emit("input",t)},displayedCouponIndex:function(t){this.scrollToShowCoupon(t)}},mounted:function(){this.scrollToShowCoupon(this.displayedCouponIndex)},methods:{onClickExchangeButton:function(){this.$emit("exchange",this.currentCode),this.code||(this.currentCode="")},scrollToShowCoupon:function(t){var e=this;-1!==t&&this.$nextTick(function(){var n=e.$refs,i=n.card,o=n.list;o&&i&&i[t]&&(o.scrollTop=i[t].$el.offsetTop-100)})},renderEmpty:function(){var t=this.$createElement;return t("div",{class:O("empty")},[t("img",{attrs:{src:T}}),t("p",[$("empty")])])},renderExchangeButton:function(){var t=this.$createElement;return t(l["a"],{attrs:{size:"small",type:"danger",text:this.exchangeButtonText||$("exchange"),loading:this.exchangeButtonLoading,disabled:this.buttonDisabled},class:O("exchange"),on:{click:this.onClickExchangeButton}})}},render:function(t){var e=this,n=this.coupons,i=this.disabledCoupons,o=(this.enabledTitle||$("enable"))+" ("+n.length+")",s=(this.disabledTitle||$("disabled"))+" ("+i.length+")",a=this.showExchangeBar&&t(d["a"],{attrs:{clearable:!0,border:!1,placeholder:this.inputPlaceholder||$("placeholder"),maxlength:"20"},class:O("field"),scopedSlots:{button:this.renderExchangeButton},model:{value:e.currentCode,callback:function(t){e.currentCode=t}}}),r=function(t){return function(){return e.$emit("change",t)}},p=t(c["a"],{attrs:{title:o}},[t("div",{class:O("list"),style:this.listStyle},[n.map(function(n,i){return t(w,{ref:"card",key:n.id,attrs:{coupon:n,currency:e.currency,chosen:i===e.chosenCoupon},nativeOn:{click:r(i)}})}),!n.length&&this.renderEmpty()])]),h=t(c["a"],{attrs:{title:s}},[t("div",{class:O("list"),style:this.listStyle},[i.map(function(n){return t(w,{attrs:{disabled:!0,coupon:n,currency:e.currency},key:n.id})}),!i.length&&this.renderEmpty()])]);return t("div",{class:O()},[a,t(u["a"],{class:O("tab"),attrs:{"line-width":120},model:{value:e.tab,callback:function(t){e.tab=t}}},[p,h]),t(l["a"],{directives:[{name:"show",value:this.showCloseButton}],attrs:{size:"large",text:this.closeButtonText||$("close")},class:O("close"),on:{click:r(-1)}})])}}),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"onecoupon"},[t.defaultCoupon?n("div",{staticClass:"fx onecoupon_head",class:{lvbuzu:t.item.limit_lv>t.rating}},[n("div",{staticClass:"onecoupon_head_1  tc"},[n("span",[t._v("￥")]),n("span",[t._v(t._s(t.$fnc.toFixedZ(t.item.money,0)))])]),n("div",{staticClass:"onecoupon_head_2 fx_3"},[n("p",[t._v(t._s(t.item.title))]),n("p",[t._v("到期："+t._s(t.$fnc.timeRange(t.item.lifetime)))])]),t.item.limit_lv<=t.rating?n("div",{staticClass:"onecoupon_head_3 fx_2 tc"},[0==t.item.is_receive?n("van-button",{staticClass:"cou_btn1",attrs:{type:"danger"},on:{click:function(e){return t.getCoupon(t.item.id)}}},[t._v("立即领取")]):n("van-button",{attrs:{type:"default"},on:{click:t.closePop}},[t._v("已领取")])],1):n("div",{staticClass:"onecoupon_head_3 fx_2 tc"},[n("van-button",{attrs:{type:"default"}},[t._v("等级不足")])],1)]):n("div",{staticClass:"fx onecoupon_head",class:{lvbuzu:0==t.item.is_cat}},[n("div",{staticClass:"onecoupon_head_1  tc"},[n("span",[t._v("￥")]),n("span",[t._v(t._s(t.$fnc.toFixedZ(t.item.money,0)))])]),n("div",{staticClass:"onecoupon_head_2 fx_3"},[n("p",[t._v(t._s(t.item.desc))]),n("p",[t._v("到期："+t._s(t.$fnc.getTimeFormat(t.item.end_time)))])]),n("div",{staticClass:"onecoupon_head_3 fx_2 tc"},[1==t.item.is_cat?n("van-button",{staticClass:"cou_btn1",attrs:{type:"danger"},on:{click:function(e){return t.setHb(t.item)}}},[t._v("立即使用")]):n("van-button",{attrs:{type:"default"}},[t._v("不可使用")])],1)]),n("div",{staticClass:"onecoupon_miaosu"},[t._v(t._s(t.item.limit_lv_cn))])])},j=[],H={props:{item:{type:Object,default:{}},defaultCoupon:{type:Boolean,default:!0}},data:function(){return{rating:this.$store.state.user.rating}},methods:{getCoupon:function(t){var e=this;this.$api.getShop.getCoupon({id:t}).then(function(t){200==t.code&&(e.$toast.success("领取成功"),e.item.is_receive=1)})},closePop:function(){this.$emit("closePop",0)},setHb:function(t){this.$emit("setHb",t)}}},B=H,M=(n("d4d2"),n("2877")),S=Object(M["a"])(B,P,j,!1,null,"3d338824",null),N=S.exports,V={components:(x={},a()(x,D.name,D),a()(x,"oneCoupon",N),x),props:{coupon:{type:Array,default:function(){return[]}},defaultCoupon:{type:Boolean,default:!0}},data:function(){return{active:"",coupon1:[],coupon2:[]}},created:function(){if(this.coupon)for(var t in this.coupon)1==this.coupon[t].is_cat?this.coupon1.push(this.coupon[t]):this.coupon2.push(this.coupon[t])},methods:{setHb:function(t){this.$emit("setHb",t)},closePop:function(){this.$emit("closePop",0)}}},E=V,A=(n("9395"),Object(M["a"])(E,i,o,!1,null,null,null));e["a"]=A.exports},9395:function(t,e,n){"use strict";var i=n("a469"),o=n.n(i);o.a},"9a97":function(t,e,n){},a469:function(t,e,n){},c382:function(t,e,n){"use strict";var i=n("531c"),o=n.n(i);o.a},d1cf:function(t,e,n){"use strict";n("68ef"),n("a526")},d32d:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add_order_con"},[n("van-nav-bar",{staticClass:"navbar",attrs:{title:"提交订单","left-text":"","left-arrow":"",border:!1},on:{"click-left":t.toBack}}),0==t.orderInfo.is_virtual?n("addOrderHead",{staticClass:"bgwrite add_order_item_head",attrs:{address_id:t.orderInfo.address_id,address:t.orderInfo.address||{}},on:{getAddressItem:t.getAddressItem}}):t._e(),t.orderInfo.integral.user_integral>0&&t.orderInfo.integral.integral_dk_money>0?n("addOrderMoney",{staticClass:"bgwrite add_order_item",attrs:{integral:t.orderInfo.integral},on:{getIsIntegral:t.getIsIntegral}}):t._e(),t.orderInfo.red&&t.orderInfo.red.length>0?n("addOrderCoupon",{staticClass:"bgwrite add_order_item",attrs:{coupon:t.orderInfo.red},on:{setHb:t.setHb,getClosePop:t.getClosePop}}):t._e(),6==t.orderInfo.types?n("addOrderTypes",{staticClass:"bgwrite add_order_item",on:{sendTime:t.getSendTime}}):t._e(),n("p",{staticClass:"add_order_details_title"},[t._v("订单详情")]),t._l(t.orderInfo.cart,function(t,e){return n("addOrderDetails",{key:e,staticClass:"bgwrite add_order_item",attrs:{card:t}})}),n("addOrderFooter",{staticClass:"bgwrite addorder_last_child",attrs:{orderInfo:t.orderInfo,couponPrice:t.couponPrice,is_integral:t.form.is_integral},on:{getIsInvoice:t.getIsInvoice}}),n("div",{staticClass:"fx order_footer_btn"},[n("div",[n("span",[t._v("￥")]),t._v("\n            "+t._s(t.sum)+"\n        ")]),n("div",[n("van-button",{attrs:{type:"danger"},on:{click:t.sunOrder}},[t._v("提交订单")])],1)])],2)},o=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a",{on:{click:function(e){e.preventDefault(),t.show=!0}}},["{}"!=JSON.stringify(t.address)?n("div",{staticClass:"add_order_head fx"},[n("p",{staticClass:"or_p1"},[t.address_id==t.address.id?n("span",{staticClass:"or_p1_mo"},[t._v("默认")]):t._e(),n("span",[t._v(t._s(t.$fnc.deleteNumber(t.address.province+t.address.city+t.address.area+t.address.town)))])]),n("div",{staticClass:"fx or_d1"},[n("p",[t._v(t._s(t.address.address))]),n("van-icon",{attrs:{color:"#000000",name:"arrow"}})],1),n("p",{staticClass:"or_p2"},[n("span",[t._v(t._s(t.address.name))]),n("span",[t._v(t._s(t.address.tel))])])]):n("div",{staticClass:"add_order_head fx"},[n("van-button",{staticClass:"add_order_head_btn",attrs:{size:"large"},on:{click:function(e){e.preventDefault(),t.show=!0}}},[t._v("还未设置收货地址，点击添加...")])],1)]),n("van-popup",{staticClass:"add_show_edit",attrs:{position:"right"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.show&&"{}"!=JSON.stringify(t.address)?n("information",{attrs:{isShop:!0,isOrder:!0},on:{getAddressItem:t.getAddressItem,back:t.getback}}):n("addAddres",{attrs:{item:{},isOrder:!0},on:{getAddressItem:t.getAddressItem,back:t.getback}})],1)],1)},a=[],r=n("8904"),c=n("bda77"),u={props:{address_id:[String,Number],address:{type:Object,default:function(){}}},components:{information:r["default"],addAddres:c["default"]},data:function(){return{show:!1}},methods:{getback:function(){this.show=!1},getAddressItem:function(t){this.$emit("getAddressItem",t),this.show=!1}}},d=u,l=(n("f4e2"),n("2877")),p=Object(l["a"])(d,s,a,!1,null,"1ab389f0",null),h=p.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add_order_money fx"},[n("div",{staticClass:"add_order_money_d1"},[n("p",[n("b",[t._v("积分")]),t._v("    共"),n("span",[t._v(t._s(t.integral.user_integral)+" ")]),t._v("其中"),n("span",[t._v(" "+t._s(t.integral.integral_dk_per)+" ")]),t._v(" 可抵 "),n("span",[t._v(" "+t._s(t.integral.integral_dk_money)+" ")]),t._v("元")])]),n("div",[n("van-switch",{attrs:{"active-value":"1","inactive-value":"0",size:"23px"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1)])},m=[],_=n("9523"),v=n.n(_),g=(n("b000"),n("1a23")),b={components:v()({},g["a"].name,g["a"]),props:{integral:{type:Object,default:{}}},data:function(){return{checked:0}},watch:{checked:function(t){this.$emit("getIsIntegral",t)}}},y=b,C=(n("8fce"),Object(l["a"])(y,f,m,!1,null,"142b0f0c",null)),x=C.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"add_order_coupon fx",on:{click:t.showPop}},[t._m(0),n("div",[t.coupon&&0==t.coupon.length?n("span",{staticClass:"sp1"},[t._v("暂无可使用优惠券")]):t._e(),t.couponPrice?n("span",{staticClass:"sp2"},[t._v(t._s("- ￥"+t.couponPrice))]):t._e(),n("van-icon",{attrs:{name:"weapp-nav",color:"#575757",size:"14px"}})],1)]),n("van-popup",{staticClass:"coupon_popup",attrs:{position:"bottom"},model:{value:t.showList,callback:function(e){t.showList=e},expression:"showList"}},[n("coupon",{attrs:{defaultCoupon:!1,coupon:t.coupon},on:{closePop:t.getClosePop,setHb:t.setHb}})],1)],1)},k=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b",[t._v("优惠券")])])}],I=n("935d"),O={components:{coupon:I["a"]},props:{coupon:{type:Array,default:function(){}}},data:function(){return{checked:!1,showList:!1,couponPrice:""}},methods:{showPop:function(){this.coupon.length>0&&(this.showList=!0)},setHb:function(t){var e=this;this.$nextTick(function(){e.couponPrice=t.money,e.showList=!1,e.$emit("setHb",t)})},getClosePop:function(){this.couponPrice="",this.$emit("getClosePop",0),this.showList=!1}}},$=O,T=(n("64a1"),Object(l["a"])($,w,k,!1,null,"3a036dd6",null)),D=T.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"add_order_coupon fx",on:{click:function(e){t.show=!0}}},[t._m(0),n("div",[t._v("\n        "+t._s(t.$fnc.getTimeFormat(new Date(t.currentTime).getTime()))+"\n      "),n("van-icon",{attrs:{name:"arrow",color:"#575757",size:"14px"}})],1)]),n("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-datetime-picker",{attrs:{type:"datetime",filter:t.filter},on:{change:t.changeTime,confirm:t.addTime,cancel:t.addTime},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1)],1)},j=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b",[t._v("请选择预约时间")])])}],H=(n("d1cf"),n("ee83")),B={components:v()({},H["a"].name,H["a"]),data:function(){return{currentTime:new Date((new Date).getFullYear()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getDate()+" "+((new Date).getHours()+1)+":00"),show:!1}},methods:{addTime:function(t){this.show=!1,t&&(this.currentTime=t,this.$emit("sendTime",(new Date(t).getTime()+"").slice(0,10)))},changeTime:function(t){var e=t.getValues();this.$emit("sendTime",(new Date(e).getTime()+"").slice(0,10))},filter:function(t,e){return"minute"===t?e.filter(function(t){return t%30===0}):e}}},M=B,S=(n("3bb9"),Object(l["a"])(M,P,j,!1,null,"2bcd813e",null)),N=S.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add_order_details"},[n("div",{staticClass:"add_order_details_d1 fx"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.card.info.shop_logo,expression:"card.info.shop_logo"}],attrs:{src:t.card.info.shop_logo,alt:""}}),n("p",{staticClass:"van-ellipsis"},[t._v(t._s(t.card.info.shop_title))])]),t._l(t.card.data,function(e,i){return n("div",{key:i,staticClass:"fx add_order_details_d2"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pro.piclink,expression:"item.pro.piclink"}],attrs:{src:e.pro.piclink,alt:""}}),n("div",{staticClass:"fx_1"},[n("p",{},[t._v(t._s(e.pro.title.length>20?e.pro.title.slice(0,20):e.pro.title)+"\n            ")]),n("p",[t._v(t._s(e.sku_cn))]),n("div",{staticClass:"fx"},[n("p",[2==e.pro.types?n("span",[t._v("积分："+t._s(e.pro.score_rob))]):n("span",[n("span",[t._v("￥")]),t._v(t._s(t.$fnc.toFixedZ(e.pro.sum_price)))])]),n("p",[t._v("×"+t._s(e.number))])])])])})],2)},E=[],A={props:{card:{type:Object,default:{}}}},F=A,z=(n("c382"),Object(l["a"])(F,V,E,!1,null,"f7db4e16",null)),L=z.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add_order_footer"},[2==t.orderInfo.types?n("div",{staticClass:"fx"},[n("p",[t._v("商品积分")]),n("p",[t._v("积分："+t._s(t.orderInfo.cart[0].data[0].pro.score_rob))])]):n("div",{staticClass:"fx"},[n("p",[t._v("商品金额")]),n("p",[t._v("￥"+t._s(t.$fnc.toFixedZ(t.orderInfo.sum_price)))])]),t.orderInfo.address?n("div",{staticClass:"fx"},[n("p",[t._v("运费")]),t.orderInfo.sum_mail>0?n("p",[n("span",[t._v("+")]),t._v("\n            ￥"+t._s(t.$fnc.toFixedZ(t.orderInfo.sum_mail))+"\n        ")]):n("p",[t._v("免邮")])]):t._e(),1==t.is_integral?n("div",{staticClass:"fx"},[n("p",[t._v("积分抵扣")]),n("p",[n("span",[t._v("-")]),t._v("\n            ￥"+t._s(t.orderInfo.integral.integral_dk_money)+"\n        ")])]):t._e(),t.couponPrice>0?n("div",{staticClass:"fx"},[n("p",[t._v("红包卷抵扣")]),n("p",[n("span",[t._v("-")]),t._v("\n            ￥"+t._s(t.couponPrice)+"\n        ")])]):t._e()])},J=[],Z={components:v()({},g["a"].name,g["a"]),data:function(){return{checked:0}},props:{orderInfo:{type:Object,default:function(){return{}}},is_integral:[Number,String],couponPrice:[Number,String]},watch:{checked:function(t){this.$emit("getIsInvoice",t)}}},R=Z,q=(n("7cfe"),Object(l["a"])(R,Y,J,!1,null,"1190acc7",null)),G=q.exports,K={components:{addOrderHead:h,addOrderMoney:x,addOrderCoupon:D,addOrderDetails:L,addOrderFooter:G,addOrderTypes:N},data:function(){return{orderInfo:{integral:{}},sum:0,form:{id_str:"",is_integral:0,red_id:"",is_invoice:0,reserve_time:""},couponPrice:0}},created:function(){this.getOrder()},watch:{$route:function(t,e){"payorder"!=t.name||e.name}},destroyed:function(){},methods:{getSendTime:function(t){this.form.reserve_time=t},getAddressItem:function(t){this.$set(this.orderInfo,"address",t)},sunOrder:function(){var t=this,e=this;if(6==this.orderInfo.types&&""==this.form.reserve_time)return this.$toast.fail("请选择预约时间"),!1;if(0==e.orderInfo.is_virtual&&void 0==e.orderInfo.address)return e.$toast.fail("请先添加收货地址"),!1;var n={};n=e.form,n.id_str=e.$store.state.order||"",n.address_id=e.orderInfo.address.id||"",e.$dialog.confirm({message:"是否确认现在去支付？"}).then(function(){e.$api.getOrder.setOrder(n).then(function(e){200==e.code&&t.$router.replace("/order/payorder?id="+e.result)})}).catch(function(){})},total:function(){var t=0;return t=Number(this.orderInfo.sum_price)+Number(this.orderInfo.sum_mail)-Number(this.couponPrice),1==this.form.is_integral?t-=Number(this.orderInfo.integral.integral_dk_money):this.sum=Number(this.sum)+Number(this.orderInfo.integral.integral_dk_money),t},getClosePop:function(t){this.couponPrice=t,this.form.red_id="",this.sum=this.total()},setHb:function(t){this.form.red_id=t.id,this.couponPrice=t.money,this.sum=this.total()},getIsInvoice:function(t){this.form.is_invoice=t},getIsIntegral:function(t){this.form.is_integral=t,this.sum=1==t?this.sum-this.orderInfo.integral.integral_dk_money:this.sum+this.orderInfo.integral.integral_dk_money},getOrder:function(){var t=this,e={},n=JSON.parse(sessionStorage.getItem("appstore")),i=this.$store.state.order||n.order;e.id_str=i||"",this.$api.getOrder.addOrder(e).then(function(e){200==e.code&&(t.orderInfo=e.result,t.sum=Number(t.orderInfo.sum_price)+Number(t.orderInfo.sum_mail))})}}},Q=K,U=(n("de78"),Object(l["a"])(Q,i,o,!1,null,"35a60ea0",null));e["default"]=U.exports},d4d2:function(t,e,n){"use strict";var i=n("5c5b"),o=n.n(i);o.a},de78:function(t,e,n){"use strict";var i=n("36cf"),o=n.n(i);o.a},ee83:function(t,e,n){"use strict";var i=n("1988"),o=n("d282"),s=n("482d"),a=n("68ed"),r=n("f253"),c=n("1b10");function u(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}function d(t,e){var n=-1,i=Array(t);while(++n<t)i[n]=e(n);return i}function l(t){if(t){while(isNaN(parseInt(t,10)))t=t.slice(1);return parseInt(t,10)}}function p(t,e){return 32-new Date(t,e-1,32).getDate()}var h=Object(o["a"])("datetime-picker"),f=h[0],m=h[1],_=(new Date).getFullYear();e["a"]=f({props:Object(i["a"])({},c["a"],{value:null,filter:Function,minHour:{type:Number,default:0},minMinute:{type:Number,default:0},type:{type:String,default:"datetime"},showToolbar:{type:Boolean,default:!0},format:{type:String,default:"YYYY.MM.DD HH时 mm分"},formatter:{type:Function,default:function(t,e){return e}},minDate:{type:Date,default:function(){return new Date(_-10,0,1)},validator:u},maxDate:{type:Date,default:function(){return new Date(_+10,11,31)},validator:u},maxHour:{type:Number,default:23},maxMinute:{type:Number,default:59}}),data:function(){return{innerValue:this.correctValue(this.value)}},watch:{value:function(t){t=this.correctValue(t);var e="time"===this.type?t===this.innerValue:t.valueOf()===this.innerValue.valueOf();e||(this.innerValue=t,"time"===this.type&&this.updateColumnValue(t))},innerValue:function(t){this.$emit("input",t)},columns:function(){this.updateColumnValue(this.innerValue)}},computed:{ranges:function(){if("time"===this.type)return[{type:"hour",range:[this.minHour,this.maxHour]},{type:"minute",range:[this.minMinute,this.maxMinute]}];var t=this.getBoundary("max",this.innerValue),e=t.maxYear,n=t.maxDate,i=t.maxMonth,o=t.maxHour,s=t.maxMinute,a=this.getBoundary("min",this.innerValue),r=a.minYear,c=a.minDate,u=a.minMonth,d=a.minHour,l=a.minMinute,p=[{type:"year",range:[r,e]},{type:"month",range:[u,i]},{type:"day",range:[c,n]},{type:"hour",range:[d,o]},{type:"minute",range:[l,s]}];return"date"===this.type&&p.splice(3,2),"year-month"===this.type&&p.splice(2,3),p},columns:function(){var t=this,e=this.ranges.map(function(e){var n=e.type,i=e.range,o=d(i[1]-i[0]+1,function(e){var o=Object(a["b"])(i[0]+e);return t.formatter(n,o)});return t.filter&&(o=t.filter(n,o)),{values:o}});return e}},mounted:function(){this.updateColumnValue(this.innerValue)},methods:{correctValue:function(t){var e="time"!==this.type;if(e&&!u(t)?t=this.minDate:t||(t=Object(a["b"])(this.minHour)+":00"),!e){var n=t.split(":"),i=n[0],o=n[1];return i=Object(a["b"])(Object(s["a"])(i,this.minHour,this.maxHour)),o=Object(a["b"])(Object(s["a"])(o,this.minMinute,this.maxMinute)),i+":"+o}return t=Math.max(t,this.minDate.getTime()),t=Math.min(t,this.maxDate.getTime()),new Date(t)},getBoundary:function(t,e){var n,i=this[t+"Date"],o=i.getFullYear(),s=1,a=1,r=0,c=0;return"max"===t&&(s=12,a=p(e.getFullYear(),e.getMonth()+1),r=23,c=59),e.getFullYear()===o&&(s=i.getMonth()+1,e.getMonth()+1===s&&(a=i.getDate(),e.getDate()===a&&(r=i.getHours(),e.getHours()===r&&(c=i.getMinutes())))),n={},n[t+"Year"]=o,n[t+"Month"]=s,n[t+"Date"]=a,n[t+"Hour"]=r,n[t+"Minute"]=c,n},onConfirm:function(){this.$emit("confirm",this.innerValue)},onChange:function(t){var e,n=this;if("time"===this.type)e=t.getValues().join(":");else{var i=t.getValues(),o=l(i[0]),s=l(i[1]),a=p(o,s),r=l(i[2]);"year-month"===this.type&&(r=1),r=r>a?a:r;var c=0,u=0;"datetime"===this.type&&(c=l(i[3]),u=l(i[4])),e=new Date(o,s-1,r,c,u)}this.innerValue=this.correctValue(e),this.$nextTick(function(){n.$nextTick(function(){n.$emit("change",t)})})},updateColumnValue:function(t){var e=this,n=[],i=this.formatter;if("time"===this.type){var o=t.split(":");n=[i("hour",o[0]),i("minute",o[1])]}else n=[i("year",""+t.getFullYear()),i("month",Object(a["b"])(t.getMonth()+1)),i("day",Object(a["b"])(t.getDate()))],"datetime"===this.type&&n.push(i("hour",Object(a["b"])(t.getHours())),i("minute",Object(a["b"])(t.getMinutes()))),"year-month"===this.type&&(n=n.slice(0,2));this.$nextTick(function(){e.$refs.picker.setValues(n)})}},render:function(t){var e=this,n={};return Object.keys(c["a"]).forEach(function(t){n[t]=e[t]}),t(r["a"],{class:m(),ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:function(){e.$emit("cancel")}},props:Object(i["a"])({},n)})}})},f4e2:function(t,e,n){"use strict";var i=n("9a97"),o=n.n(i);o.a}}]);