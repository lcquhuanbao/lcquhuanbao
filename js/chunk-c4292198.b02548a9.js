(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4292198"],{"08ce":function(t,s,e){},"188c":function(t,s,e){},6575:function(t,s,e){"use strict";e.r(s);var i,o=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"content",staticClass:"details_shop_conn",on:{scroll:t.scroll}},[i("div",{staticClass:"step-jump"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showNav,expression:"showNav"}],staticClass:"fx details_head"},[i("div",[i("img",{staticClass:"op_img",attrs:{src:e("2db1"),alt:""},on:{click:t.toBack}})]),i("div",[i("img",{staticClass:"op_img",attrs:{src:e("4e31"),alt:""},on:{click:t.addEwm}})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showNav,expression:"!showNav"}],staticClass:"fx details_head",style:t.opacityStyle},[i("div",[i("img",{attrs:{src:e("a68c"),alt:""},on:{click:t.toBack}})]),i("div",{staticClass:"details_head_a fx"},t._l(t.lis,function(s,e){return i("a",{key:e,class:{active:e==t.activeStep},on:{click:function(s){return s.preventDefault(),t.jump(e)}}},[t._v(t._s(s))])}),0),i("div",[i("img",{attrs:{src:e("32cf"),alt:""},on:{click:t.addEwm}})])])]),i("shop-details-swiper",{directives:[{name:"show",rawName:"v-show",value:t.shopInfo.img_json.length>0,expression:"shopInfo.img_json.length>0"}],attrs:{list:t.shopInfo.img_json,id:"shophead"},on:{setXq:t.setXq}}),7==t.shopInfo.types?i("shopdetaillimit",{attrs:{shopInfo:t.shopInfo}}):t._e(),2==t.shopInfo.types?i("shopdetailintegral",{attrs:{shopInfo:t.shopInfo}}):t._e(),7!=t.shopInfo.types&&2!=t.shopInfo.types?i("shop-details-title",{attrs:{shopInfo:t.shopInfo}}):t._e(),t.shopInfo.shopInfo&&t.shopInfo.coupon.length>0||t.shopInfo.discount_number>0||t.shopInfo.send_score>0?i("div",{staticClass:"details_liubai s1"}):t._e(),7!=t.shopInfo.types&&2!=t.shopInfo.types?i("shop-details-cell",{attrs:{shopInfo:t.shopInfo}}):t._e(),t.shopInfo.one_talk?i("div",{staticClass:"details_liubai step-jump"}):t._e(),t.shopInfo.one_talk?i("shop-details-sevaluate",{attrs:{oneTalk:t.shopInfo.one_talk,talk_num:t.shopInfo.talk_num}}):t._e(),t.shopInfo.sid>0||t.shopInfo.recommend.length>0||t.shopInfo.hot.length>0?i("div",{staticClass:"details_liubai"}):t._e(),i("shopDetailsShop",{attrs:{shopInfo:t.shopInfo}}),i("div",{staticClass:"details_liubai"}),t.shopInfo.content?i("shopDetailsInfo",{staticClass:"step-jump",attrs:{content:t.shopInfo.content,id:"shopinfo"}}):t._e(),i("van-goods-action",[t.shopInfo.sid>0?i("van-goods-action-icon",{attrs:{icon:"shop-o",text:"店铺"},on:{click:t.toSupplierShop}}):i("van-goods-action-icon",{attrs:{icon:"home-o",text:"首页"},on:{click:function(s){return t.$router.push("/index")}}}),t.shopInfo.kf_im?i("van-goods-action-icon",{attrs:{icon:"chat-o",text:"客服"},on:{click:t.toIm}}):i("van-goods-action-icon",{attrs:{icon:"apps-o",text:"首页"},on:{click:function(s){return t.$router.push({path:"/page/vip",query:{iden:"home"}})}}}),i("van-goods-action-icon",{attrs:{icon:"cart-o",info:t.shopInfo.cart_number||"",text:"购物车"},on:{click:function(s){return t.$router.push("/shop/shopcard")}}}),0==t.shopInfo.types||1==t.shopInfo.types?i("van-goods-action-button",{attrs:{type:"warning",text:"加入购物车"},on:{click:function(s){return t.addCard(0)}}}):t._e(),0==t.shopInfo.types||1==t.shopInfo.types?i("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"},on:{click:function(s){return t.addCard(1)}}}):t._e(),6==t.shopInfo.types?i("van-goods-action-button",{attrs:{type:"warning",text:"电话咨询"},on:{click:t.sendTel}}):t._e(),6==t.shopInfo.types?i("van-goods-action-button",{attrs:{type:"danger",text:"立即预约"},on:{click:function(s){return t.addCard(1)}}}):t._e(),7==t.shopInfo.types?i("van-goods-action-button",{attrs:{type:"danger",text:"立即抢购"},on:{click:function(s){return t.addCard(1)}}}):t._e(),2==t.shopInfo.types?i("van-goods-action-button",{attrs:{type:"danger",text:"立即兑换"},on:{click:function(s){return t.addCard(1)}}}):t._e()],1),i("div",{staticStyle:{height:"50px"}}),i("van-popup",{staticStyle:{"border-radius":"5px 5px 0 0"},attrs:{position:"bottom",overlay:!0},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i("shopDetailsSku",{attrs:{shopInfo:t.shopInfo,toAut:t.index},on:{closePop:t.getClosePop}})],1),i("van-popup",{staticClass:"animated show-share-pop",class:[t.showShare?"bounceInDown":"bounceOutUp"],attrs:{position:""},model:{value:t.showShare,callback:function(s){t.showShare=s},expression:"showShare"}},[i("div",[i("div",{staticClass:"upload_shaer_img"},[i("img",{staticClass:"imgUrl",attrs:{src:t.imgUrl,alt:""}}),i("van-icon",{attrs:{name:"clear",size:"28px",color:"red"},on:{click:function(s){t.showShare=!1}}})],1),i("div",{staticClass:"upload_shaer_btn"},[i("div",{staticClass:"tc",on:{click:function(s){return t.uploadShare(t.isWx)}}},[i("img",{staticClass:"upload_img_ewm",attrs:{src:e("8b80"),alt:""}}),i("span",[t._v(t._s(0==t.isWx?"长按保存":"保存到系统相册"))])])])])]),i("div",{ref:"imageDom",staticClass:"shop-share"},[i("div",{staticClass:"shop-share-con"},[i("div",{staticClass:"shop-share-head"},[i("img",{attrs:{src:t.$fnc.getImgUrl(t.shopInfo.piclink),crossorigin:"anonymous",alt:""}})]),i("p",{staticClass:"shop-share-title"},[t._v("\n                "+t._s(t.shopInfo.title)+"\n                "),i("span",[i("small",[t._v("￥")]),t._v("\n                    "+t._s(t.shopInfo.price)+"\n                ")])]),i("p",{staticClass:"shop-share-tj"},[t._v("推荐理由："+t._s(t.shopInfo.sub_title))])]),i("img",{attrs:{src:e("9def8"),crossorigin:"anonymous",alt:""}}),i("div",{staticClass:"shop-share-footer fx"},[i("div",{staticClass:"fx"},[i("img",{attrs:{src:t.$fnc.getImgUrl(t.$store.state.user.avatar,"sex")||(2==t.$store.state.user.sex?e("d750"):e("15e3")),crossorigin:"anonymous",alt:""}}),i("div",[i("span",[t._v(t._s((t.$store.state.user.nickname+"").length>=12?(t.$store.state.user.nickname+"").slice(0,12):t.$store.state.user.nickname||t.$store.state.user.username))]),i("p",[t._v("为你推荐")])])]),i("div",{attrs:{id:"qrcode"}})])])],1)},a=[],n=e("9523"),r=e.n(n),c=(e("ef6f"),e("82a8")),h=(e("591c"),e("7713")),l=(e("93ac"),e("bb33")),p=e("f63a"),u=e("1fb4"),d=e("b708"),f=e("5939"),_=e("e5eb"),m=e("ac0e"),v=e("608a"),g=e("fdb1"),I=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"shop_detail_limit"},[e("div",{staticClass:"shop_detail_limit_left"},[e("p",[t._v("￥"),e("span",[t._v(t._s(t.shopInfo.activity.limited_price))])]),e("div",{staticClass:"shop_detail_limit_left_price"},[e("div",{staticClass:"shop_detail_limit_left_price_box"},[e("div",{staticClass:"limit_price_box_left"},[e("van-icon",{attrs:{name:"clock-o",size:"14px",color:"#dd1c1a"}})],1),t._m(0)]),e("p",[t._v(t._s(t.shopInfo.price))])])]),e("div",{staticClass:"shop_detail_limit_right"},[e("p",[t._v("距结束还剩:")]),e("p",[e("span",[t._v(t._s(t.hour))]),t._v(":"),e("span",[t._v(t._s(t.min))]),t._v(":"),e("span",[t._v(t._s(t.sec))])])])]),e("h3",{staticClass:"shop_detail_limit_title"},[t._v("DIDDI MODA 原创 2019新款流行双面羊绒大衣冬季长款驼色毛呢外套")]),t._m(1)])},y=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"limit_price_box_right"},[e("span",[t._v("商品原价")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tj"},[e("h3",[t._v("推荐理由")]),e("div",[e("p",[e("span",[t._v("推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由")])])])])}],k=e("5118"),w={name:"shop_detail_limit",data:function(){return{settime:{},hour:"",min:"",sec:"",time:"2672516"}},props:{shopInfo:{type:Object,default:{}}},created:function(){this.time=this.shopInfo.activity.distance_end_time,this.get_time()},methods:{get_time:function(){var t=this.time,s=0,e=0;t>60&&(s=parseInt(t/60),t=parseInt(t%60),s>60&&(e=parseInt(s/60),s=parseInt(s%60))),this.sec=parseInt(t)>9?t:"0"+t,this.min=s>0?parseInt(s)>9?s:s="0"+s:"00",this.hour=e>0?parseInt(e)>9?e:e="0"+e:"00",this.time=this.time-1,this.settime=Object(k["setTimeout"])(this.get_time,1e3)}},components:{},beforeDestroy:function(){clearTimeout(this.settime)}},$=w,S=(e("c833"),e("2877")),C=Object(S["a"])($,I,y,!1,null,"01767ccc",null),b=C.exports,x=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"shop_detail_integral"},[e("div",{staticClass:"shop_detail_integral_top"},[e("p",[t._v("积分："),e("span",[t._v(t._s(t.shopInfo.score_rob))])]),e("div",{staticClass:"title_title_2"},[e("p",[e("van-icon",{attrs:{name:t.shopInfo.collect?"star":"star-o",color:"#333",size:"20px"},on:{click:t.changesc}})],1),e("p",[t._v(t._s(t.shopInfo.collect?"已收藏":"收藏"))])])])]),e("h3",{staticClass:"shop_detail_limit_title"},[t._v("DIDDI MODA 原创 2019新款流行双面羊绒大衣冬季长款驼色毛呢外套")]),t._m(0)])},T=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tj"},[e("h3",[t._v("推荐理由")]),e("div",[e("p",[e("span",[t._v("推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由推荐理由")])])])])}],D={name:"shop_detail_limit",data:function(){return{}},props:{shopInfo:{type:Object,default:{}}},components:{},methods:{changesc:function(){var t=this;1==this.shopInfo.collect?this.shopInfo.collect=!1:this.shopInfo.collect=!0;var s={};s.id=this.$route.query.id||"",this.$api.getShop.getGz(s).then(function(s){200==s.code&&t.$toast.success(s.result)})}}},j=D,q=(e("f61a"),Object(S["a"])(j,x,T,!1,null,"72d3544d",null)),O=q.exports,U=e("c0e9"),N=e.n(U),E=e("d044"),A=e.n(E),z=e("a78e"),P=e.n(z),W={name:"shopdetails",components:(i={shopDetailsSwiper:p["a"],shopDetailsTitle:u["a"]},r()(i,"shopDetailsTitle",u["a"]),r()(i,"shopDetailsCell",d["a"]),r()(i,"shopDetailsSevaluate",f["a"]),r()(i,"shopDetailsShop",_["a"]),r()(i,"shopDetailsInfo",m["a"]),r()(i,l["a"].name,l["a"]),r()(i,h["a"].name,h["a"]),r()(i,c["a"].name,c["a"]),r()(i,"shopDetailsSku",v["a"]),r()(i,"ShopShare",g["a"]),r()(i,"shopdetaillimit",b),r()(i,"shopdetailintegral",O),i),data:function(){return{shopInfo:{img_json:[],one_talk:{},recommend:[],hot:[]},lis:[],activeStep:-1,index:0,show:!1,showNav:!0,opacityStyle:{opacity:0,background:""},scrollTop:0,pageTop:0,showShare:!1,url:location.origin,imgUrl:"",isWx:"0",timer:null}},beforeDestroy:function(){this.timer&&Object(k["clearInterval"])(this.timer)},beforeCreate:function(){},created:function(){var t=this;this.getShopDetails(this.$route.query.id),this.timer&&Object(k["clearInterval"])(this.timer),this.$nextTick(function(){t.pageTop=t.scrollTop})},mounted:function(){var t=window.navigator.userAgent.toLowerCase();"micromessenger"==t.match(/MicroMessenger/i)?(this.isWx="0",this.starTimer()):"ykapp"==t.match(/ykapp/i)?(this.starTimer(),this.isWx="1"):(this.starTimer(),this.isWx="2")},methods:{starTimer:function(){var t=this;this.timer=setInterval(function(){t.endTp()},1e4)},toIm:function(){this.getTp({pid:this.$route.query.id,sid:this.shopInfo.sid,is_im:1}),this.$router.push(this.shopInfo.kf_im)},toSupplierShop:function(){this.getTp({pid:this.$route.query.id,sid:this.shopInfo.sid,is_store:1}),this.$router.push("/supplier/supplierdetails?id="+this.shopInfo.sid)},endTp:function(t){var s=!P.a.get("user");if(!(s||JSON.stringify("{}"!=this.$store.state.config)&&0==this.$store.state.config.plugin.zyfh.is_open)){t=t||this.$route.query.id||"";var e=this.$route.query.tshare||"";if(""!=t&&""!=e){var i=this.shopInfo.sid||"";this.$api.getZhanYe.endShopTp({pid:t,sid:i})}}},getTp:function(t){var s=this,e=t.pid,i=t.sid,o=(t.tid,t.is_ask),a=t.is_msg,n=t.is_im,r=t.is_store,c=!P.a.get("user"),h=this.$route.query.tshare||0;if(0!=h&&h!=this.$store.state.user.uid&&"undefined"!=h&&!(c||JSON.stringify("{}"!=this.$store.state.config)&&0==this.$store.state.config.plugin.zyfh.is_open)){var l={};l.pid=e||this.$route.query.id||"",l.sid=i||"0",l.tid=h,l.is_ask=o||"0",l.is_msg=a||"0",l.is_im=n||"0",l.is_store=r||"0",this.$api.getZhanYe.addShopTp(l).then(function(t){t.result||Object(k["clearInterval"])(s.timer)})}},sendTel:function(){var t=this.$store.state.config.shop.mall_tel||"";if(""==t)return this.$toast.fail("商铺电话为空，请联系客服"),!1;this.$fnc.tel(t)},addEwm:function(){var t=!P.a.get("user");t?this.$toast.fail("请先登录！"):this.showPop()},addCard:function(t){var s=this,e=!P.a.get("user");if(e)return this.$toast.fail("请先登录！"),setTimeout(function(){s.$store.dispatch("getUser")},1e3),!1;var i=this.$store.state.config.shop.reg_permission||0,o=this.$store.state.user;return 0==o.tid&&1==i?(this.$store.commit("setTsShare",!0),!1):""==o.tel?(this.$store.commit("setShowBingPhone",!0),!1):(0==t?this.shopInfo.types>0?this.index=1:this.index=0:this.index=1,void(this.show=!0))},setXq:function(){this.jump(2)},jump:function(t){var s=this;this.activeStep=t;var e=document.querySelectorAll(".step-jump"),i=e[t].offsetTop+45,o=this.pageTop,a=i/50>>0;if(i>o)r();else{var n=o-i;a=n/50>>0,c()}function r(){o<i?(o+=a,s.onScroll1(o),setTimeout(r,10)):s.onScroll1(i)}function c(){o>i?(o-=a,s.onScroll1(o),setTimeout(c,10)):s.onScroll1(i)}},onScroll1:function(t){this.$refs.content.scrollTop=t-45},onScroll:function(){var t=this,s=document.querySelectorAll(".step-jump");s.forEach(function(s,e){t.scrollTop>=s.offsetTop&&(t.activeStep=e)})},scroll:function(t){var s=t.srcElement.scrollTop;if(s>60){var e=s/140;e=e>1?1:e;this.opacityStyle.opacity=e,this.opacityStyle.background="rgba(255,68,68,"+e+")",this.showNav=!1}else this.showNav=!0;this.scrollTop=s,this.onScroll(),this.pageTop=s},getClosePop:function(){this.show=!1},getShopDetails:function(t){var s=this,e={};e.id=t||"",this.$api.getShop.getShopDetails(e).then(function(t){if(200==t.code){var e={};e.title=t.result.title,e.desc=t.result.sub_title,e.imgUrl=t.result.piclink,s.wxApi.ShareAppMessage(e),s.shopInfo=t.result,s.qrcode(),s.getTp({pid:s.shopInfo.id,sid:s.shopInfo.sid});var i=["商品"];t.result.one_talk&&i.push("评论"),t.result.content&&i.push("详情"),s.lis=i}})},qrcode:function(){new A.a("qrcode",{width:56,height:56,text:this.url+this.$route.path+"?id="+this.$route.query.id+"&tid="+(this.$store.state.user.uid||"0"),colorDark:"#000",colorLight:"#fff"})},showPop:function(){var t=this,s=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"加载中..."});N()(this.$refs.imageDom,{useCORS:!0,logging:!0}).then(function(e){t.imgUrl=e.toDataURL("image/png"),t.imgUrl&&(t.showShare=!0,s.clear())})},uploadShare:function(t){this.show=!1,this.$fnc.ykAppUpImage(this.imgUrl)}}},M=W,J=(e("fec8"),Object(S["a"])(M,o,a,!1,null,"516e0527",null));s["default"]=J.exports},c833:function(t,s,e){"use strict";var i=e("08ce"),o=e.n(i);o.a},e0d2:function(t,s,e){},f61a:function(t,s,e){"use strict";var i=e("188c"),o=e.n(i);o.a},fec8:function(t,s,e){"use strict";var i=e("e0d2"),o=e.n(i);o.a}}]);