(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a128c846"],{"1b10":function(t,i,e){"use strict";e.d(i,"a",function(){return n});var n={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44}}},"1d82":function(t,i,e){},"1f87":function(t,i,e){"use strict";e("68ef"),e("1d82")},"510b":function(t,i,e){"use strict";var n=e("d282"),s=e("6aa9"),o=Object(n["a"])("steps"),a=o[0],r=o[1];i["a"]=a({props:{inactiveIcon:String,active:{type:Number,default:0},direction:{type:String,default:"horizontal"},activeColor:{type:String,default:s["d"]},activeIcon:{type:String,default:"checked"}},data:function(){return{steps:[]}},render:function(t){return t("div",{class:r([this.direction])},[t("div",{class:r("items")},[this.slots()])])}})},"5f5f":function(t,i,e){"use strict";e("68ef"),e("a526")},"74c6":function(t,i,e){"use strict";e.r(i);var n,s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container equity_bg"},[e("van-nav-bar",{staticClass:"navbar",attrs:{title:"权益认购","left-text":"","left-arrow":"",border:!1},on:{"click-left":function(i){return t.toBack()}}}),e("div",{staticClass:"info_box"},[e("div",{staticClass:"info_box_top"},[e("van-icon",{attrs:{name:"chart-trending-o",size:"20px",color:"#000000"}}),e("div",{staticClass:"info_box_right"},[e("p",[t._v(t._s(t.info.title))]),0==t.info.is_open?e("p",[t._v("未开始")]):1==t.info.is_open?e("p",[t._v("认购中："+t._s(t.$fnc.getTimeFormat(t.info.buy_time)))]):2==t.info.is_open?e("p",[t._v("开盘时间："+t._s(t.$fnc.getTimeFormat(t.info.open_time)))]):t._e()])],1),e("div",{staticClass:"info_box_count"},[e("div",{staticClass:"info_box_count_content info_box_count_left",staticStyle:{width:"62%"}},[e("p",[t._v("总认购数量")]),e("p",[t._v(t._s(t.$fnc.toFixedZ(t.info.subscriptions,2))+"股")]),e("p",[e("van-icon",{attrs:{name:"checked",color:"#08a395",size:"16px"}}),t._v("\n                    "+t._s(t.$fnc.toFixedZ(t.info.number_min,0))+"股起购"),e("span",[t._v("|")]),t._v("您已认购"+t._s(t.$fnc.toFixedZ(t.info.my_equity,0))+"股\n                ")],1)]),e("div",{staticClass:"info_box_count_content info_box_count_right",staticStyle:{width:"38%"}},[e("p",[t._v("本轮结束价格")]),e("p",[t._v(t._s(t.$fnc.toFixedZ(t.info.max_pruce,2))+"Apst")]),e("p",[t._v("认购价格:"+t._s(t.$fnc.toFixedZ(t.info.price,2))+"Apst")])])]),2==t.info.is_open||3==t.info.is_open?e("div",{staticClass:"info_box_chart"},[e("div",{staticClass:"info_box_chart_header"},[e("p",[t._v("开盘时间:"+t._s(t.$fnc.getTimeFormat(t.info.open_time)))]),e("p",[t._v("今日涨幅:"+t._s(t.$fnc.toFixedZ(t.info.today_rise,2))+"%")])]),e("div",{staticClass:"info_box_chart_img"},[e("div",{ref:"info_charts",staticStyle:{width:"100%",height:"100%"},attrs:{id:"info_charts"}})]),e("div",{staticClass:"info_box_btn"},[e("button",{on:{click:t.big}},[t._v("放大")]),e("button",{on:{click:t.small}},[t._v("缩小")])])]):t._e(),e("div",{staticClass:"info_box_buy"},[e("div",{staticClass:"info_box_chart_header"},[e("p",[t._v("认购进度")]),0==t.info.is_open?e("p",[t._v("认购状态:未开始")]):t._e(),1==t.info.is_open?e("p",[t._v("认购状态:已认购  \n                    当前认购数量："+t._s(t.$fnc.toFixedZ(t.info.progress,4)))]):t._e(),2==t.info.is_open?e("p",[t._v("认购状态:已开盘")]):t._e()]),e("div",{staticClass:"info_box_buy_step"},[e("van-steps",{attrs:{active:t.active_percent,color:"blue","active-icon":"success","inactive-icon":"arrow","active-color":"#248ad4","inactive-color":"#248ad4"}},t._l(t.percent_list,function(i,n){return e("van-step",{key:n},[t._v(t._s(i)+"股")])}),1),t._m(0)],1)]),e("van-notice-bar",{attrs:{background:"#ecf9ff",scrollable:!1}},[e("div",{attrs:{slot:"left-icon"},slot:"left-icon"},[e("van-icon",{attrs:{name:"info-o",size:"16px",color:"#f8696b"}})],1),e("p",{staticClass:"info_box_notice"},[t._v("认购完成后即可开盘,未开盘前认购享受"+t._s(t.info.before_opening)+"%每日收益")])]),0==t.info.is_open?e("div",{staticClass:"info_box_button"},[t._v("\n            未开始\n        ")]):t._e(),1==t.info.is_open?e("div",{staticClass:"info_box_button",on:{click:t.join_buy}},[t._v("\n            参与认购\n        ")]):t._e(),2==t.info.is_open?e("div",{staticClass:"info_box_button"},[t._v("\n            已开盘\n        ")]):t._e()],1),e("van-dialog",{attrs:{title:"参与认购","show-cancel-button":""},on:{confirm:t.buy_submit},model:{value:t.dia_show,callback:function(i){t.dia_show=i},expression:"dia_show"}},[e("div",{staticClass:"input_buy"},[e("van-cell-group",[e("van-field",{attrs:{required:"",border:!1,clearable:"",label:"认购权益数"},on:{click:function(i){t.show_picker=!0}},model:{value:t.buy.number,callback:function(i){t.$set(t.buy,"number",i)},expression:"buy.number "}}),e("van-field",{attrs:{type:"password",label:"支付密码",placeholder:"请输入密码",required:""},model:{value:t.buy.password,callback:function(i){t.$set(t.buy,"password",i)},expression:"buy.password"}})],1)],1)]),e("van-popup",{attrs:{position:"bottom"},model:{value:t.show_picker,callback:function(i){t.show_picker=i},expression:"show_picker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(i){t.show_picker=!1},confirm:t.sel_pricker}})],1)],1)},o=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"info_box_buy_step_percent"},[e("span",[t._v("0 %")]),e("span",[t._v("25%")]),e("span",[t._v("50%")]),e("span",[t._v("75%")]),e("span",[t._v("100%")])])}],a=e("9523"),r=e.n(a),c=(e("5f5f"),e("f253")),u=(e("be7f"),e("565f")),l=(e("e17f"),e("2241")),f=(e("480b"),e("a37c")),h=(e("1f87"),e("510b")),d=(e("77f8"),e("dc0f")),p=e("313e"),m=e.n(p),_={name:"equity_list",data:function(){return{start:80,end:100,myChart:{},columns:[],show_picker:!1,buy:{id:this.$route.query.id,number:0,password:""},dia_show:!1,active:2,info:{after_rise:"",before_opening:Number,before_rise:"",buy_time:"",created_time:"",id:"",income_multiple:"",is_open:"",is_stock:"",max_pruce:"",now_price:"",number_min:"",open_time:"",price:"",price_ar:[],progress:"",subscriptions:"",title:"",today_rise:"",update_time:""}}},components:(n={},r()(n,d["a"].name,d["a"]),r()(n,h["a"].name,h["a"]),r()(n,f["a"].name,f["a"]),r()(n,l["a"].name,l["a"]),r()(n,u["a"].name,u["a"]),r()(n,c["a"].name,c["a"]),n),mounted:function(){this.get_infolist()},computed:{active_percent:function(){var t=this.info.progress/this.info.subscriptions;t*=100;var i=0;switch(!0){case 2==this.info.is_open||3==this.info.is_open:i=4;break;case 100==t:i=4;break;case t>=75:i=3;break;case t>=50:i=2;break;case t>=25:i=1;break;case t>=0:i=0;break;default:break}return i},percent_list:function(){for(var t=parseInt(this.info.subscriptions),i=t/4,e=[],n=0;n<5;n++)e.push(n*i);return e}},methods:{info_box_btn:function(){},big:function(){this.$nextTick(function(){80!=this.start&&(this.start+=20),this.myChart.setOption({dataZoom:{start:this.start}})})},small:function(){this.$nextTick(function(){0!=this.start&&(this.start-=20),this.myChart.setOption({dataZoom:{start:this.start}})})},sel_pricker:function(t){this.buy.number=t,this.show_picker=!1},buy_submit:function(){var t=this;parseInt(this.buy.number)<parseInt(this.info.number_min)?this.$toast.success("不得小于最低认购权益数"):this.$dialog.confirm({title:"提示",message:"确定购买"+this.buy.number+"权益数吗？"}).then(function(){var i=t.buy;i.password=t.$getCode(i.password),t.$api.getApst.join_info(i).then(function(i){200==i.code?(t.$toast.success("提交成功"),t.dia_show=!1,setTimeout(function(){t.$router.push("/apst/my_equity")},3e3)):t.password=""})}).catch(function(){t.dia_show=!1})},join_buy:function(){this.dia_show=!0,this.buy={id:this.$route.query.id,number:"",password:""}},get_infolist:function(){var t=this;this.$api.getApst.get_infolist({id:this.$route.query.id}).then(function(i){if(200==i.code){if(t.info=i.result,t.percent=parseInt(t.info.progress)/parseInt(t.info.subscriptions)*100,2==i.result.is_open||3==i.result.is_open){for(var e=[],n=[],s=0;s<i.result.price_ar.length;s++)e.push(t.$fnc.mstime(i.result.price_ar[s]["price_time"])),n.push(i.result.price_ar[s]["price"]);t.get_echarts(e,n)}t.columns=i.result.gold_select}})},get_echarts:function(t,i){this.$nextTick(function(){var e=document.getElementById("info_charts");this.myChart=m.a.init(e),this.myChart.setOption({toolbox:{feature:{}},grid:{left:"0%",right:"0%",bottom:"10%",top:"10%",containLabel:!0},xAxis:{type:"category",data:t},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:"cross",show:!0}},dataZoom:[{type:"inside",throttle:"50",minValueSpan:2,start:80,end:100}],yAxis:{type:"value"},series:[{data:i,type:"line",color:"#007ffd"}]})})}}},v=_,b=(e("bc7b"),e("2877")),g=Object(b["a"])(v,s,o,!1,null,"62a1ea8c",null);i["default"]=g.exports},"77f8":function(t,i,e){"use strict";e("68ef"),e("09fe"),e("ae39")},a526:function(t,i,e){},ae39:function(t,i,e){},bc7b:function(t,i,e){"use strict";var n=e("f5ac"),s=e.n(n);s.a},dc0f:function(t,i,e){"use strict";var n=e("d282"),s=e("ad06"),o=Object(n["a"])("step"),a=o[0],r=o[1];i["a"]=a({beforeCreate:function(){var t=this.$parent.steps,i=this.$parent.slots().indexOf(this.$vnode);t.splice(-1===i?t.length:i,0,this)},beforeDestroy:function(){var t=this.$parent.steps.indexOf(this);t>-1&&this.$parent.steps.splice(t,1)},computed:{status:function(){var t=this.$parent.steps.indexOf(this),i=this.$parent.active;return t<i?"finish":t===i?"process":void 0}},render:function(t){var i,e=this.slots,n=this.status,o=this.$parent,a=o.activeIcon,c=o.activeColor,u=o.inactiveIcon,l=o.direction,f="process"===n&&{color:c};function h(){if("process"===n)return e("active-icon")||t(s["a"],{class:r("icon"),attrs:{name:a,color:c}});var i=e("inactive-icon");return u||i?i||t(s["a"],{class:r("icon"),attrs:{name:u}}):t("i",{class:r("circle")})}return t("div",{class:["van-hairline",r([l,(i={},i[n]=n,i)])]},[t("div",{class:r("title"),style:f},[this.slots()]),t("div",{class:r("circle-container")},[h()]),t("div",{class:r("line")})])}})},f253:function(t,i,e){"use strict";var n=e("1988"),s=e("d282"),o=e("1325"),a=e("1128");function r(t){return Array.isArray(t)?t.map(function(t){return r(t)}):"object"===typeof t?Object(a["a"])({},t):t}var c=e("1b10"),u=e("6aa9"),l=e("543e"),f=e("a142"),h=e("482d"),d=e("3875"),p=200,m=1e3,_=300,v=15,b=Object(s["a"])("picker-column"),g=b[0],x=b[1];function y(t){var i=window.getComputedStyle(t),e=i.transform||i.webkitTransform,n=e.slice(7,e.length-1).split(", ")[5];return Number(n)}function C(t){return Object(f["c"])(t)&&t.disabled}var I=g({mixins:[d["a"]],props:{valueKey:String,className:String,itemHeight:Number,defaultIndex:Number,visibleItemCount:Number,initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:r(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length}},methods:{onTouchStart:function(t){if(this.touchStart(t),this.moving){var i=y(this.$refs.wrapper);this.startOffset=Math.min(0,i)}else this.startOffset=this.offset;this.duration=0,this.moving=!1,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset},onTouchMove:function(t){Object(o["c"])(t),this.moving=!0,this.touchMove(t),this.offset=Object(h["a"])(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var i=Date.now();i-this.touchStartTime>_&&(this.touchStartTime=i,this.momentumOffset=this.offset)},onTouchEnd:function(){var t=this.offset-this.momentumOffset,i=Date.now()-this.touchStartTime,e=i<_&&Math.abs(t)>v;if(e)this.momentum(t,i);else if(this.offset!==this.startOffset){this.duration=p;var n=this.getIndexByOffset(this.offset);this.setIndex(n,!0)}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.duration=p,this.setIndex(t,!0)},adjustIndex:function(t){t=Object(h["a"])(t,0,this.count);for(var i=t;i<this.count;i++)if(!C(this.options[i]))return i;for(var e=t-1;e>=0;e--)if(!C(this.options[e]))return e},getOptionText:function(t){return Object(f["c"])(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,i){var e=this;t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight;var n=function(){t!==e.currentIndex&&(e.currentIndex=t,i&&e.$emit("change",t))};this.moving?this.transitionEndTrigger=n:n()},setValue:function(t){for(var i=this.options,e=0;e<i.length;e++)if(this.getOptionText(i[e])===t)return this.setIndex(e)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(h["a"])(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,i){var e=Math.abs(t/i);t=this.offset+e/.002*(t<0?-1:1);var n=this.getIndexByOffset(t);this.duration=m,this.setIndex(n,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)}},render:function(t){var i=this,e=this.itemHeight,n=this.visibleItemCount,s=e*(n-1)/2,o={transform:"translate3d(0, "+(this.offset+s)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none",lineHeight:e+"px"},a={height:e+"px"};return t("div",{class:[x(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{ref:"wrapper",style:o,class:x("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.options.map(function(e,n){return t("li",{style:a,class:["van-ellipsis",x("item",{disabled:C(e),selected:n===i.currentIndex})],domProps:{innerHTML:i.getOptionText(e)},on:{click:function(){i.onClickItem(n)}}})})])])}}),w=Object(s["a"])("picker"),k=w[0],$=w[1],O=w[2];i["a"]=k({props:Object(n["a"])({},c["a"],{defaultIndex:{type:Number,default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this,i=this.simple?[{values:this.columns}]:this.columns;i.forEach(function(i,e){t.setColumnValues(e,r(i.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var i=this.getColumn(t);return i&&i.getValue()},setColumnValue:function(t,i){var e=this.getColumn(t);e&&e.setValue(i)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,i){var e=this.getColumn(t);e&&e.setIndex(i)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,i){var e=this.children[t];e&&JSON.stringify(e.options)!==JSON.stringify(i)&&(e.options=i,e.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var i=this;t.forEach(function(t,e){i.setColumnValue(e,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var i=this;t.forEach(function(t,e){i.setColumnIndex(e,t)})},onConfirm:function(){this.children.map(function(t){return t.stopMomentum()}),this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var i=this,e=this.itemHeight,n=e*this.visibleItemCount,s=this.simple?[this.columns]:this.columns,a={height:e+"px"},r={height:n+"px"},c={backgroundSize:"100% "+(n-e)/2+"px"},f=this.showToolbar&&t("div",{class:["van-hairline--top-bottom",$("toolbar")]},[this.slots()||[t("div",{attrs:{role:"button",tabindex:"0"},class:$("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||O("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",$("title")]},[this.title]),t("div",{attrs:{role:"button",tabindex:"0"},class:$("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||O("confirm")])]]);return t("div",{class:$()},["top"===this.toolbarPosition?f:t(),this.loading?t(l["a"],{class:$("loading"),attrs:{color:u["a"]}}):t(),t("div",{class:$("columns"),style:r,on:{touchmove:o["c"]}},[s.map(function(e,n){return t(I,{attrs:{valueKey:i.valueKey,className:e.className,itemHeight:i.itemHeight,defaultIndex:e.defaultIndex||i.defaultIndex,visibleItemCount:i.visibleItemCount,initialOptions:i.simple?e:e.values},on:{change:function(){i.onChange(n)}}})}),t("div",{class:$("mask"),style:c}),t("div",{class:["van-hairline--top-bottom",$("frame")],style:a})]),"bottom"===this.toolbarPosition?f:t()])}})},f5ac:function(t,i,e){}}]);