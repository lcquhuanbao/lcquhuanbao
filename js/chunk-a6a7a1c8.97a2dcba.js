(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6a7a1c8"],{"085f":function(t,e,n){"use strict";var i=n("6e6e"),s=n.n(i);s.a},"0b08":function(t,e,n){"use strict";n.r(e);var i,s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"a-f-u-con"},[n("van-nav-bar",{staticClass:"navbar",attrs:{title:"写跟进","left-text":"","left-arrow":""},on:{"click-left":t.toBack}}),n("van-cell-group",{staticClass:"add-fullow"},[n("van-cell",{attrs:{title:"客户"}},[n("span",[t._v(t._s(t.$route.query.name||""))]),n("span",{staticClass:"cell-required"},[t._v("*")])]),n("van-cell",{attrs:{title:"跟进时间"},on:{click:function(e){t.show=!0}}},[n("span",[t._v(t._s("---"==t.$fnc.getTimeFormat(t.follow_time)?"请选择跟进时间":t.$fnc.getTimeFormat(t.follow_time)))]),n("span",{staticClass:"cell-required"},[t._v("*")])])],1),n("van-cell-group",{staticClass:"add-fullow ad_shop"},[n("van-field",{attrs:{type:"textarea",placeholder:"请输入联系结果",rows:"4",autosize:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),n("van-cell-group",{staticClass:"add-fullow"},[n("van-cell",{attrs:{title:"更新客户状态","is-link":"",value:t.isType(t.custom_type)},on:{click:function(e){t.showType=!0}}})],1),n("div",{staticClass:"add-bottom"},[n("van-button",{attrs:{type:"primary",size:"large"},on:{click:t.subFollow}},[t._v("保存")])],1),n("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:t.confirmTime},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:t.showType,callback:function(e){t.showType=e},expression:"showType"}},[n("van-picker",{attrs:{columns:t.columns,"value-key":"title"},on:{change:t.onChange}})],1)],1)},o=[],a=n("9523"),r=n.n(a),u=(n("5f5f"),n("f253")),c=(n("d1cf"),n("ee83")),l=(n("be7f"),n("565f")),h=n("5118"),m={name:"AddFollowUp",components:(i={},r()(i,l["a"].name,l["a"]),r()(i,c["a"].name,c["a"]),r()(i,u["a"].name,u["a"]),i),data:function(){return{content:"",show:!1,currentDate:new Date,follow_time:(new Date).getTime(),tel:"",showType:!1,columns:[{title:"A类客户",custom_type:"1"},{title:"B类客户",custom_type:"2"},{title:"C类客户",custom_type:"3"},{title:"其他",custom_type:"4"}],title:"",custom_type:this.$route.query.title||"1"}},methods:{subFollow:function(){var t=this;t.$dialog.confirm({message:"是否确认提交？"}).then(function(){var e={};e.follow_id=t.$route.query.id||"",e.follow_time=(t.follow_time+"").slice(0,10),e.content=t.content,e.custom_type=t.custom_type,t.$api.getZhanYe.addFollow(e).then(function(e){200==e.code&&(t.$toast.success("操作成功"),Object(h["setTimeout"])(function(){t.toBack()},1500))})}).catch(function(){})},onChange:function(t,e,n){this.title=e.title,this.custom_type=e.custom_type},confirmTime:function(t){this.show=!1,this.follow_time=new Date(t).getTime()},isType:function(t){return 1==t?"A类客户":2==t?"B类客户":3==t?"C类客户":"其他"}}},f=m,d=(n("085f"),n("2877")),p=Object(d["a"])(f,s,o,!1,null,"16b6bf65",null);e["default"]=p.exports},"1b10":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44}}},"5f5f":function(t,e,n){"use strict";n("68ef"),n("a526")},"6e6e":function(t,e,n){},a526:function(t,e,n){},d1cf:function(t,e,n){"use strict";n("68ef"),n("a526")},ee83:function(t,e,n){"use strict";var i=n("1988"),s=n("d282"),o=n("482d"),a=n("68ed"),r=n("f253"),u=n("1b10");function c(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}function l(t,e){var n=-1,i=Array(t);while(++n<t)i[n]=e(n);return i}function h(t){if(t){while(isNaN(parseInt(t,10)))t=t.slice(1);return parseInt(t,10)}}function m(t,e){return 32-new Date(t,e-1,32).getDate()}var f=Object(s["a"])("datetime-picker"),d=f[0],p=f[1],g=(new Date).getFullYear();e["a"]=d({props:Object(i["a"])({},u["a"],{value:null,filter:Function,minHour:{type:Number,default:0},minMinute:{type:Number,default:0},type:{type:String,default:"datetime"},showToolbar:{type:Boolean,default:!0},format:{type:String,default:"YYYY.MM.DD HH时 mm分"},formatter:{type:Function,default:function(t,e){return e}},minDate:{type:Date,default:function(){return new Date(g-10,0,1)},validator:c},maxDate:{type:Date,default:function(){return new Date(g+10,11,31)},validator:c},maxHour:{type:Number,default:23},maxMinute:{type:Number,default:59}}),data:function(){return{innerValue:this.correctValue(this.value)}},watch:{value:function(t){t=this.correctValue(t);var e="time"===this.type?t===this.innerValue:t.valueOf()===this.innerValue.valueOf();e||(this.innerValue=t,"time"===this.type&&this.updateColumnValue(t))},innerValue:function(t){this.$emit("input",t)},columns:function(){this.updateColumnValue(this.innerValue)}},computed:{ranges:function(){if("time"===this.type)return[{type:"hour",range:[this.minHour,this.maxHour]},{type:"minute",range:[this.minMinute,this.maxMinute]}];var t=this.getBoundary("max",this.innerValue),e=t.maxYear,n=t.maxDate,i=t.maxMonth,s=t.maxHour,o=t.maxMinute,a=this.getBoundary("min",this.innerValue),r=a.minYear,u=a.minDate,c=a.minMonth,l=a.minHour,h=a.minMinute,m=[{type:"year",range:[r,e]},{type:"month",range:[c,i]},{type:"day",range:[u,n]},{type:"hour",range:[l,s]},{type:"minute",range:[h,o]}];return"date"===this.type&&m.splice(3,2),"year-month"===this.type&&m.splice(2,3),m},columns:function(){var t=this,e=this.ranges.map(function(e){var n=e.type,i=e.range,s=l(i[1]-i[0]+1,function(e){var s=Object(a["b"])(i[0]+e);return t.formatter(n,s)});return t.filter&&(s=t.filter(n,s)),{values:s}});return e}},mounted:function(){this.updateColumnValue(this.innerValue)},methods:{correctValue:function(t){var e="time"!==this.type;if(e&&!c(t)?t=this.minDate:t||(t=Object(a["b"])(this.minHour)+":00"),!e){var n=t.split(":"),i=n[0],s=n[1];return i=Object(a["b"])(Object(o["a"])(i,this.minHour,this.maxHour)),s=Object(a["b"])(Object(o["a"])(s,this.minMinute,this.maxMinute)),i+":"+s}return t=Math.max(t,this.minDate.getTime()),t=Math.min(t,this.maxDate.getTime()),new Date(t)},getBoundary:function(t,e){var n,i=this[t+"Date"],s=i.getFullYear(),o=1,a=1,r=0,u=0;return"max"===t&&(o=12,a=m(e.getFullYear(),e.getMonth()+1),r=23,u=59),e.getFullYear()===s&&(o=i.getMonth()+1,e.getMonth()+1===o&&(a=i.getDate(),e.getDate()===a&&(r=i.getHours(),e.getHours()===r&&(u=i.getMinutes())))),n={},n[t+"Year"]=s,n[t+"Month"]=o,n[t+"Date"]=a,n[t+"Hour"]=r,n[t+"Minute"]=u,n},onConfirm:function(){this.$emit("confirm",this.innerValue)},onChange:function(t){var e,n=this;if("time"===this.type)e=t.getValues().join(":");else{var i=t.getValues(),s=h(i[0]),o=h(i[1]),a=m(s,o),r=h(i[2]);"year-month"===this.type&&(r=1),r=r>a?a:r;var u=0,c=0;"datetime"===this.type&&(u=h(i[3]),c=h(i[4])),e=new Date(s,o-1,r,u,c)}this.innerValue=this.correctValue(e),this.$nextTick(function(){n.$nextTick(function(){n.$emit("change",t)})})},updateColumnValue:function(t){var e=this,n=[],i=this.formatter;if("time"===this.type){var s=t.split(":");n=[i("hour",s[0]),i("minute",s[1])]}else n=[i("year",""+t.getFullYear()),i("month",Object(a["b"])(t.getMonth()+1)),i("day",Object(a["b"])(t.getDate()))],"datetime"===this.type&&n.push(i("hour",Object(a["b"])(t.getHours())),i("minute",Object(a["b"])(t.getMinutes()))),"year-month"===this.type&&(n=n.slice(0,2));this.$nextTick(function(){e.$refs.picker.setValues(n)})}},render:function(t){var e=this,n={};return Object.keys(u["a"]).forEach(function(t){n[t]=e[t]}),t(r["a"],{class:p(),ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:function(){e.$emit("cancel")}},props:Object(i["a"])({},n)})}})},f253:function(t,e,n){"use strict";var i=n("1988"),s=n("d282"),o=n("1325"),a=n("1128");function r(t){return Array.isArray(t)?t.map(function(t){return r(t)}):"object"===typeof t?Object(a["a"])({},t):t}var u=n("1b10"),c=n("6aa9"),l=n("543e"),h=n("a142"),m=n("482d"),f=n("3875"),d=200,p=1e3,g=300,v=15,y=Object(s["a"])("picker-column"),b=y[0],x=y[1];function w(t){var e=window.getComputedStyle(t),n=e.transform||e.webkitTransform,i=n.slice(7,n.length-1).split(", ")[5];return Number(i)}function C(t){return Object(h["c"])(t)&&t.disabled}var T=b({mixins:[f["a"]],props:{valueKey:String,className:String,itemHeight:Number,defaultIndex:Number,visibleItemCount:Number,initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:r(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length}},methods:{onTouchStart:function(t){if(this.touchStart(t),this.moving){var e=w(this.$refs.wrapper);this.startOffset=Math.min(0,e)}else this.startOffset=this.offset;this.duration=0,this.moving=!1,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset},onTouchMove:function(t){Object(o["c"])(t),this.moving=!0,this.touchMove(t),this.offset=Object(m["a"])(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>g&&(this.touchStartTime=e,this.momentumOffset=this.offset)},onTouchEnd:function(){var t=this.offset-this.momentumOffset,e=Date.now()-this.touchStartTime,n=e<g&&Math.abs(t)>v;if(n)this.momentum(t,e);else if(this.offset!==this.startOffset){this.duration=d;var i=this.getIndexByOffset(this.offset);this.setIndex(i,!0)}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.duration=d,this.setIndex(t,!0)},adjustIndex:function(t){t=Object(m["a"])(t,0,this.count);for(var e=t;e<this.count;e++)if(!C(this.options[e]))return e;for(var n=t-1;n>=0;n--)if(!C(this.options[n]))return n},getOptionText:function(t){return Object(h["c"])(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var n=this;t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight;var i=function(){t!==n.currentIndex&&(n.currentIndex=t,e&&n.$emit("change",t))};this.moving?this.transitionEndTrigger=i:i()},setValue:function(t){for(var e=this.options,n=0;n<e.length;n++)if(this.getOptionText(e[n])===t)return this.setIndex(n)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(m["a"])(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var n=Math.abs(t/e);t=this.offset+n/.002*(t<0?-1:1);var i=this.getIndexByOffset(t);this.duration=p,this.setIndex(i,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)}},render:function(t){var e=this,n=this.itemHeight,i=this.visibleItemCount,s=n*(i-1)/2,o={transform:"translate3d(0, "+(this.offset+s)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none",lineHeight:n+"px"},a={height:n+"px"};return t("div",{class:[x(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{ref:"wrapper",style:o,class:x("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.options.map(function(n,i){return t("li",{style:a,class:["van-ellipsis",x("item",{disabled:C(n),selected:i===e.currentIndex})],domProps:{innerHTML:e.getOptionText(n)},on:{click:function(){e.onClickItem(i)}}})})])])}}),O=Object(s["a"])("picker"),I=O[0],V=O[1],D=O[2];e["a"]=I({props:Object(i["a"])({},u["a"],{defaultIndex:{type:Number,default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this,e=this.simple?[{values:this.columns}]:this.columns;e.forEach(function(e,n){t.setColumnValues(n,r(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&n.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&n.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var n=this.children[t];n&&JSON.stringify(n.options)!==JSON.stringify(e)&&(n.options=e,n.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,n){e.setColumnValue(n,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,n){e.setColumnIndex(n,t)})},onConfirm:function(){this.children.map(function(t){return t.stopMomentum()}),this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,n=this.itemHeight,i=n*this.visibleItemCount,s=this.simple?[this.columns]:this.columns,a={height:n+"px"},r={height:i+"px"},u={backgroundSize:"100% "+(i-n)/2+"px"},h=this.showToolbar&&t("div",{class:["van-hairline--top-bottom",V("toolbar")]},[this.slots()||[t("div",{attrs:{role:"button",tabindex:"0"},class:V("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||D("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",V("title")]},[this.title]),t("div",{attrs:{role:"button",tabindex:"0"},class:V("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||D("confirm")])]]);return t("div",{class:V()},["top"===this.toolbarPosition?h:t(),this.loading?t(l["a"],{class:V("loading"),attrs:{color:c["a"]}}):t(),t("div",{class:V("columns"),style:r,on:{touchmove:o["c"]}},[s.map(function(n,i){return t(T,{attrs:{valueKey:e.valueKey,className:n.className,itemHeight:e.itemHeight,defaultIndex:n.defaultIndex||e.defaultIndex,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?n:n.values},on:{change:function(){e.onChange(i)}}})}),t("div",{class:V("mask"),style:u}),t("div",{class:["van-hairline--top-bottom",V("frame")],style:a})]),"bottom"===this.toolbarPosition?h:t()])}})}}]);