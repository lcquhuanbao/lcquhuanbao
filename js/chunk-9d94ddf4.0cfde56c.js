(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d94ddf4","chunk-548fbca6"],{"177e":function(e,t,a){"use strict";var s=a("785f"),i=a.n(s);i.a},"4feb":function(e,t,a){"use strict";var s=a("1988"),i=a("2638"),n=a.n(i),r=a("d282"),o=a("ba31"),l=a("7744"),c=a("1a23"),d=a("2797"),u=Object(r["a"])("switch-cell"),h=u[0],f=u[1];function p(e,t,a,i){return e(l["a"],n()([{attrs:{center:!0,size:t.cellSize,title:t.title,border:t.border},class:f([t.cellSize])},Object(o["b"])(i)]),[e(c["a"],{props:Object(s["a"])({},t),on:Object(s["a"])({},i.listeners)})])}p.props=Object(s["a"])({},d["a"],{title:String,cellSize:String,border:{type:Boolean,default:!0},size:{type:String,default:"24px"}}),t["a"]=h(p)},"54f3":function(e,t,a){},"6c1e":function(e,t,a){"use strict";var s=a("54f3"),i=a.n(s);i.a},"785f":function(e,t,a){},8904:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" inf_height"},[a("van-nav-bar",{staticClass:"navbar",attrs:{title:"收货信息","left-text":"","left-arrow":""},on:{"click-left":e.backLeft}}),a("div",[a("div",e._l(e.list,function(t,s){return a("div",{key:s},[a("van-radio-group",{model:{value:e.showId,callback:function(t){e.showId=t},expression:"showId"}},[a("div",{staticClass:"cu-form-group margin-top up_dizhi",on:{click:function(a){return a.preventDefault(),e.closeAddress(t)}}},[a("div",{staticClass:"title"},[e._v("收货人姓名："+e._s(t.name)+"    电话："+e._s(t.tel))]),a("div",[e._v(e._s(e.$fnc.deleteNumber(t.province+"-"+t.city+"-"+t.area+(t.town?"-"+t.town:""))+" "+t.address))])]),a("div",{staticClass:"bgwrite item_address fx"},[a("div",{staticClass:"cu-form-group",on:{click:function(a){return e.RadioChange(t)}}},[a("van-radio",{attrs:{name:t,"icon-size":"26px","checked-color":"#39b54a"}}),a("span",{staticClass:"shouhuodizhi"},[e._v("设为当前地址")])],1),a("div",{},[a("a",[a("span",{staticClass:"left_edit"},[a("span",{staticClass:"fa fa-edit"}),a("span",{staticClass:"text-df",on:{click:function(a){return e.onEdit(t,s)}}},[e._v("编辑")])])]),a("span",[a("span",{staticClass:"fa fa-trash-o"}),a("span",{staticClass:"text-delete",on:{click:function(a){return e.close(t.id)}}},[e._v("删除")])])])])])],1)}),0),a("div",{staticClass:"padding no_zhi_sub"},[a("a",{attrs:{url:"/pages/component/setting/tianjiaaddres","hover-class":"none","animation-duration":"300","animation-type":"fade-in"}},[a("button",{staticClass:"cu-btn bg-gradual-orange block margin-tb-sm lg",on:{click:e.onAdd}},[e._v("新增地址")])])])]),a("van-popup",{staticClass:"add_show_edit",attrs:{position:"right"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.show?a("addAddres",{attrs:{isOrder:!0,item:e.item},on:{back:e.back,getAddressItem:e.getAddressItem}}):e._e()],1)],1)},i=[],n=a("9523"),r=a.n(n),o=(a("4ddd"),a("9f14")),l=(a("a44c"),a("e27c")),c=(a("68ef"),a("09fe"),a("dde9"),a("e2c8"),a("2638")),d=a.n(c),u=a("d282"),h=a("ba31"),f=a("b650"),p=a("6aa9"),m=a("ad06"),b=a("7744"),v=Object(u["a"])("address-item"),g=v[0],w=v[1];function k(e,t,a,s){var i=t.disabled,n=t.switchable;function r(){n&&Object(h["a"])(s,"select")}var l=function(){return e(m["a"],{attrs:{name:"edit"},class:w("edit"),on:{click:function(e){e.stopPropagation(),Object(h["a"])(s,"edit")}}})},c=function(){var a=t.data,s=[e("div",{class:w("name")},[a.name+"，"+a.tel]),e("div",{class:w("address")},[a.address])];return n&&!i?e(o["a"],{attrs:{name:a.id,iconSize:16,checkedColor:p["e"]}},[s]):s};return e(b["a"],d()([{class:w({disabled:i}),attrs:{valueClass:w("value"),clickable:n&&!i},scopedSlots:{default:c,"right-icon":l},on:{click:r}},Object(h["b"])(s)]))}k.props={data:Object,disabled:Boolean,switchable:Boolean};var y=g(k),A=Object(u["a"])("address-list"),C=A[0],$=A[1],S=A[2];function x(e,t,a,s){function i(a,i){if(a)return a.map(function(a,n){return e(y,{attrs:{data:a,disabled:i,switchable:t.switchable},key:a.id,on:{select:function(){Object(h["a"])(s,i?"select-disabled":"select",a,n)},edit:function(){Object(h["a"])(s,i?"edit-disabled":"edit",a,n)}}})})}var n=i(t.list),r=i(t.disabledList,!0);return e("div",d()([{class:$()},Object(h["b"])(s)]),[a.top&&a.top(),e(l["a"],{attrs:{value:t.value},on:{input:function(e){Object(h["a"])(s,"input",e)}}},[n]),t.disabledText&&e("div",{class:$("disabled-text")},[t.disabledText]),r,a.default&&a.default(),e(f["a"],{attrs:{square:!0,size:"large",type:"danger",text:t.addButtonText||S("add")},class:$("add"),on:{click:function(){Object(h["a"])(s,"add")}}})])}x.props={list:Array,disabledList:Array,disabledText:String,addButtonText:String,value:[Number,String],switchable:{type:Boolean,default:!0}};var O,j=C(x),D=a("bda77"),_={data:function(){return{showId:"",name:"",tel:"",address:"",radio:"1",addressList:[],load:!1,is_address:!1,chosenAddressId:"",list:[],show:!1,item:{}}},props:{isShop:{type:Boolean,default:!1}},components:(O={},r()(O,j.name,j),r()(O,"addAddres",D["default"]),r()(O,l["a"].name,l["a"]),r()(O,o["a"].name,o["a"]),O),created:function(){this.getAddress()},methods:{backLeft:function(){this.toBack()},getAddressItem:function(e){this.$emit("getAddressItem",e)},closeAddress:function(e){this.isShop&&this.$emit("getAddressItem",e)},RadioChange:function(e){var t=this,a={is_show:1};a.id=e.id,this.$api.getSetting.setDefaultAddress(a).then(function(e){200==e.code&&(t.$toast.success("设置成功"),t.$emit("getAddressItem",e.result))})},close:function(e){var t=this;t.$dialog.confirm({title:"提示",message:"是否删除"}).then(function(){var a={};a.id=e,t.$api.getSetting.delAddres(a).then(function(e){200==e.code&&(t.$toast.success("删除成功"),setTimeout(function(){t.getAddress()},2e3))})})},onAdd:function(){this.show=!0,this.item={}},onSelect:function(e){},onEdit:function(e,t){e.county=e.area,e.addressDetail=e.add,this.item=e,this.show=!0},getAddress:function(){var e=this;this.$api.getSetting.getAddres({}).then(function(t){if(200===t.code){var a=[];a=t.result,a.filter(function(t){t.add=t.address,1==t.is_show&&(e.showId=t)}),e.list=a,e.load=!0}})},back:function(e){this.show=!1,e&&this.getAddress()}}},T=_,B=(a("177e"),a("2877")),R=Object(B["a"])(T,s,i,!1,null,null,null);t["default"]=R.exports},afaa:function(e,t,a){},b7e7:function(e,t,a){},bda77:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addres_con"},[a("van-nav-bar",{staticClass:"navbar",attrs:{title:e.item.id?"修改地址":"添加地址","left-text":"","left-arrow":""},on:{"click-left":function(t){return e.back(!1)}}}),a("van-cell-group",{staticClass:"address_set cell"},[a("van-field",{attrs:{clearable:"",label:"姓名","input-align":"right",placeholder:"请输入姓名"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),a("van-field",{attrs:{type:"tel",label:"电话","input-align":"right",placeholder:"请输入联系电话"},model:{value:e.params.tel,callback:function(t){e.$set(e.params,"tel",t)},expression:"params.tel"}}),a("van-cell",{staticStyle:{"font-size":"12px"},attrs:{title:"地区",value:e.cateTitle,id:"trigger"}},[a("van-icon",{attrs:{slot:"right-icon",name:"arrow",size:"14px"},slot:"right-icon"})],1),a("van-field",{attrs:{clearable:"",label:"详细地址","input-align":"right",placeholder:"街道门牌，楼层房间号等信息"},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}})],1),a("div",{staticClass:"sk-butt"},[a("van-button",{attrs:{type:"primary",size:"large"},on:{click:e.onSave}},[e._v(e._s(void 0!=e.params.id?"修改":"保存"))])],1)],1)},i=[],n=a("9523"),r=a.n(n),o=(a("be7f"),a("565f")),l=(a("68ef"),a("a526"),a("09fe"),a("1146"),a("4d75"),a("b258"),a("2fcb"),a("d9d2"),a("afaa"),a("b7e7"),a("1988")),c=a("d282"),d=a("a142");function u(e){return e=e.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(e)||/^0[0-9-]{10,13}$/.test(e)}var h,f=a("1125"),p=a("e41f"),m=a("d399"),b=a("b650"),v=a("2241"),g=a("32d7"),w=a("7744"),k=Object(c["a"])("address-edit-detail"),y=k[0],A=k[1],C=k[2],$=Object(g["a"])(),S=y({props:{value:String,error:Boolean,focused:Boolean,detailRows:Number,searchResult:Array,detailMaxlength:Number,showSearchResult:Boolean},methods:{onSelect:function(e){this.$emit("select-search",e),this.$emit("input",((e.address||"")+" "+(e.name||"")).trim())},onFinish:function(){this.$refs.field.blur()},renderFinish:function(){var e=this.$createElement,t=this.value&&this.focused&&$;if(t)return e("div",{class:A("finish"),on:{click:this.onFinish}},[C("complete")])},renderSearchResult:function(){var e=this,t=this.$createElement,a=this.searchResult,s=this.focused&&a&&this.showSearchResult;if(s)return a.map(function(a){return t(w["a"],{key:a.name+a.address,attrs:{title:a.name,label:a.address,icon:"location-o",clickable:!0},on:{click:function(){e.onSelect(a)}}})})}},render:function(e){return e(w["a"],{class:A()},[e(o["a"],{attrs:{autosize:!0,rows:this.detailRows,clearable:!$,type:"textarea",value:this.value,error:this.error,label:C("label"),maxlength:this.detailMaxlength,placeholder:C("placeholder")},ref:"field",scopedSlots:{icon:this.renderFinish},on:Object(l["a"])({},this.$listeners)}),this.renderSearchResult()])}}),x=a("4feb"),O=Object(c["a"])("address-edit"),j=O[0],D=O[1],_=O[2],T={name:"",tel:"",country:"",province:"",city:"",county:"",areaCode:"",postalCode:"",addressDetail:"",isDefault:!1},B=j({props:{areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showDelete:Boolean,showPostal:Boolean,searchResult:Array,showSetDefault:Boolean,showSearchResult:Boolean,saveButtonText:String,deleteButtonText:String,showArea:{type:Boolean,default:!0},showDetail:{type:Boolean,default:!0},detailRows:{type:Number,default:1},detailMaxlength:{type:Number,default:200},addressInfo:{type:Object,default:function(){return Object(l["a"])({},T)}},telValidator:{type:Function,default:u}},data:function(){return{data:{},showAreaPopup:!1,detailFocused:!1,errorInfo:{tel:!1,name:!1,postalCode:!1,addressDetail:!1}}},computed:{areaListLoaded:function(){return Object(d["c"])(this.areaList)&&Object.keys(this.areaList).length},areaText:function(){var e=this.data,t=e.country,a=e.province,s=e.city,i=e.county,n=e.areaCode;if(n){var r=[t,a,s,i];return a&&a===s&&r.splice(1,1),r.filter(function(e){return e}).join("/")}return""}},watch:{addressInfo:{handler:function(e){this.data=Object(l["a"])({},T,{},e),this.setAreaCode(e.areaCode)},deep:!0,immediate:!0},areaList:function(){this.setAreaCode(this.data.areaCode)}},methods:{onFocus:function(e){this.errorInfo[e]=!1,this.detailFocused="addressDetail"===e,this.$emit("focus",e)},onChangeDetail:function(e){this.data.addressDetail=e,this.$emit("change-detail",e)},onAreaConfirm:function(e){this.showAreaPopup=!1,this.assignAreaValues(),this.$emit("change-area",e)},assignAreaValues:function(){var e=this.$refs.area;if(e){var t=e.getArea();t.areaCode=t.code,delete t.code,Object(l["a"])(this.data,t)}},onSave:function(){var e=this,t=["name","tel","areaCode","addressDetail"];this.showPostal&&t.push("postalCode");var a=t.every(function(t){var a=e.getErrorMessage(t);return a&&(e.errorInfo[t]=!0,Object(m["a"])(a)),!a});a&&!this.isSaving&&this.$emit("save",this.data)},getErrorMessage:function(e){var t=String(this.data[e]||"").trim();if(this.validator){var a=this.validator(e,t);if(a)return a}switch(e){case"name":return t?"":_("nameEmpty");case"tel":return this.telValidator(t)?"":_("telInvalid");case"areaCode":return t?"":_("areaEmpty");case"addressDetail":return t?"":_("addressEmpty");case"postalCode":return t&&!/^\d{6}$/.test(t)?_("postalEmpty"):""}},onDelete:function(){var e=this;v["a"].confirm({title:_("confirmDelete")}).then(function(){e.$emit("delete",e.data)}).catch(function(){e.$emit("cancel-delete",e.data)})},getArea:function(){return this.$refs.area?this.$refs.area.getValues():[]},setAreaCode:function(e){this.data.areaCode=e||"",e&&this.$nextTick(this.assignAreaValues)},setAddressDetail:function(e){this.data.addressDetail=e},onDetailBlur:function(){var e=this;setTimeout(function(){e.detailFocused=!1})}},render:function(e){var t=this,a=this.data,s=this.errorInfo,i=this.searchResult,n=function(e){return function(){return t.onFocus(e)}},r=i&&i.length&&this.detailFocused;return e("div",{class:D()},[e(o["a"],{attrs:{clearable:!0,label:_("name"),placeholder:_("namePlaceholder"),error:s.name},on:{focus:n("name")},model:{value:a.name,callback:function(e){a.name=e}}}),e(o["a"],{attrs:{clearable:!0,type:"tel",label:_("tel"),placeholder:_("telPlaceholder"),error:s.tel},on:{focus:n("tel")},model:{value:a.tel,callback:function(e){a.tel=e}}}),e(o["a"],{directives:[{name:"show",value:this.showArea}],attrs:{readonly:!0,label:_("area"),placeholder:_("areaPlaceholder"),value:this.areaText},on:{click:function(){t.showAreaPopup=!0}}}),e(S,{directives:[{name:"show",value:this.showDetail}],attrs:{focused:this.detailFocused,value:a.addressDetail,error:s.addressDetail,detailRows:this.detailRows,detailMaxlength:this.detailMaxlength,searchResult:this.searchResult,showSearchResult:this.showSearchResult},on:{focus:n("addressDetail"),blur:this.onDetailBlur,input:this.onChangeDetail,"select-search":function(e){t.$emit("select-search",e)}}}),this.showPostal&&e(o["a"],{directives:[{name:"show",value:!r}],attrs:{type:"tel",maxlength:"6",label:_("postal"),placeholder:_("postal"),error:s.postalCode},on:{focus:n("postalCode")},model:{value:a.postalCode,callback:function(e){a.postalCode=e}}}),this.slots(),this.showSetDefault&&e(x["a"],{directives:[{name:"show",value:!r}],attrs:{title:_("defaultAddress")},on:{change:function(e){t.$emit("change-default",e)}},model:{value:a.isDefault,callback:function(e){a.isDefault=e}}}),e("div",{directives:[{name:"show",value:!r}],class:D("buttons")},[e(b["a"],{attrs:{block:!0,loading:this.isSaving,type:"danger",text:this.saveButtonText||_("save")},on:{click:this.onSave}}),this.showDelete&&e(b["a"],{attrs:{block:!0,loading:this.isDeleting,text:this.deleteButtonText||_("delete")},on:{click:this.onDelete}})]),e(p["a"],{attrs:{position:"bottom",lazyRender:!1,getContainer:"body"},model:{value:t.showAreaPopup,callback:function(e){t.showAreaPopup=e}}},[e(f["a"],{ref:"area",attrs:{loading:!this.areaListLoaded,value:a.areaCode,areaList:this.areaList},on:{confirm:this.onAreaConfirm,cancel:function(){t.showAreaPopup=!1}}})])])}}),R=a("5118"),I=a("e11d"),z=a("d319"),L=a.n(z),E=a("33eb").default,F={components:(h={},r()(h,B.name,B),r()(h,o["a"].name,o["a"]),h),data:function(){return{areaList:E,searchResult:[],cateTitle:"请选择所在地区",params:{name:"",tel:"",address:"",province:"",city:"",area:"",town:""},citys:[]}},props:{item:{type:Object,default:function(){}},isOrder:{type:Boolean,default:!1}},created:function(){this.params=this.item,this.item.id&&(this.cateTitle=this.item.province,this.cateTitle+="-"+this.item.city,this.cateTitle+="-"+this.item.area,this.item.town&&(this.cateTitle+="-"+this.item.town),this.cateTitle=this.$fnc.deleteNumber(this.cateTitle))},mounted:function(){var e=this;new L.a({trigger:"#trigger",title:"",triggerDisplayData:!1,wheels:[{data:I}],keyMap:{id:"y",value:"t",childs:"z"},position:[],callback:function(t,a){e.params.town="",e.cateTitle=a[0].t+"-"+a[1].t+"-"+a[2].t,e.params.province=a[0].t,e.params.city=a[1].t,e.params.area=a[2].t,a[3]&&(e.params.town=a[3].t,e.cateTitle+="-"+a[3].t),e.cateTitle=e.$fnc.deleteNumber(e.cateTitle)},transitionEnd:function(e,t){}})},methods:{back:function(e){this.$emit("back",e)},onSave:function(){var e=this,t=this.params;this.params.id?this.$api.getSetting.setDefaultAddress(t).then(function(t){200==t.code&&(e.$toast.success("修改成功"),e.isOrder?(e.$emit("getAddressItem",t.result),e.back(!0)):Object(R["setTimeout"])(function(){e.back(!0)},2e3))}):this.$api.getSetting.addAress(t).then(function(t){200==t.code&&(e.$toast.success("添加成功"),e.isOrder?(e.$emit("getAddressItem",t.result),e.back(!0)):Object(R["setTimeout"])(function(){e.back(!0)},2e3))})},onDelete:function(e){var t=this,a={};a.id=e.id,this.$api.getSetting.delAddres(a).then(function(e){200==e.code&&(t.$toast.success("删除成功"),Object(R["setTimeout"])(function(){t.back(!0)},2e3))})}}},P=F,M=(a("6c1e"),a("2877")),N=Object(M["a"])(P,s,i,!1,null,"7053d0c9",null);t["default"]=N.exports},e2c8:function(e,t,a){}}]);